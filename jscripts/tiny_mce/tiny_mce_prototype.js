(function(b){var a=/^\s*|\s*$/g,c;b.tinymce=b.tinyMCE={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var r=this,o=document,m=navigator,f=m.userAgent,l,e,k,j,h,q;r.isOpera=b.opera&&opera.buildNumber;r.isWebKit=/WebKit/.test(f);r.isIE=!r.isWebKit&&!r.isOpera&&(/MSIE/gi).test(f)&&(/Explorer/gi).test(m.appName);r.isIE6=r.isIE&&/MSIE [56]/.test(f);r.isGecko=!r.isWebKit&&/Gecko/.test(f);r.isMac=f.indexOf("Mac")!=-1;r.isAir=/adobeair/i.test(f);if(b.tinyMCEPreInit){r.suffix=tinyMCEPreInit.suffix;r.baseURL=tinyMCEPreInit.base;r.query=tinyMCEPreInit.query;return}r.suffix="";e=o.getElementsByTagName("base");for(l=0;l<e.length;l++){if(q=e[l].href){if(/^https?:\/\/[^\/]+$/.test(q)){q+="/"}j=q?q.match(/.*\//)[0]:""}}function g(d){if(d.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(d.src)){if(/_(src|dev)\.js/g.test(d.src)){r.suffix="_src"}if((h=d.src.indexOf("?"))!=-1){r.query=d.src.substring(h+1)}r.baseURL=d.src.substring(0,d.src.lastIndexOf("/"));if(j&&r.baseURL.indexOf("://")==-1&&r.baseURL.indexOf("/")!==0){r.baseURL=j+r.baseURL}return r.baseURL}return null}e=o.getElementsByTagName("script");for(l=0;l<e.length;l++){if(g(e[l])){return}}k=o.getElementsByTagName("head")[0];if(k){e=k.getElementsByTagName("script");for(l=0;l<e.length;l++){if(g(e[l])){return}}}return},is:function(e,d){if(!d){return e!==c}if(d=="array"&&(e.hasOwnProperty&&e instanceof Array)){return true}return typeof(e)==d},each:function(g,d,f){var h,e;if(!g){return 0}f=f||g;if(g.length!==c){for(h=0,e=g.length;h<e;h++){if(d.call(f,g[h],h,g)===false){return 0}}}else{for(h in g){if(g.hasOwnProperty(h)){if(d.call(f,g[h],h,g)===false){return 0}}}}return 1},map:function(d,e){var g=[];tinymce.each(d,function(f){g.push(e(f))});return g},grep:function(d,e){var g=[];tinymce.each(d,function(f){if(!e||e(f)){g.push(f)}});return g},inArray:function(e,f){var g,d;if(e){for(g=0,d=e.length;g<d;g++){if(e[g]===f){return g}}}return -1},extend:function(j,h){var g,f,d=arguments;for(g=1,f=d.length;g<f;g++){h=d[g];tinymce.each(h,function(e,i){if(e!==c){j[i]=e}})}return j},trim:function(d){return(d?""+d:"").replace(a,"")},create:function(l,d){var k=this,e,g,h,i,f,j=0;l=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(l);h=l[3].match(/(^|\.)(\w+)$/i)[2];g=k.createNS(l[3].replace(/\.\w+$/,""));if(g[h]){return}if(l[2]=="static"){g[h]=d;if(this.onCreate){this.onCreate(l[2],l[3],g[h])}return}if(!d[h]){d[h]=function(){};j=1}g[h]=d[h];k.extend(g[h].prototype,d);if(l[5]){e=k.resolve(l[5]).prototype;i=l[5].match(/\.(\w+)$/i)[1];f=g[h];if(j){g[h]=function(){return e[i].apply(this,arguments)}}else{g[h]=function(){this.parent=e[i];return f.apply(this,arguments)}}g[h].prototype[h]=g[h];k.each(e,function(m,o){g[h].prototype[o]=e[o]});k.each(d,function(m,o){if(e[o]){g[h].prototype[o]=function(){this.parent=e[o];return m.apply(this,arguments)}}else{if(o!=h){g[h].prototype[o]=m}}})}k.each(d["static"],function(m,o){g[h][o]=m});if(this.onCreate){this.onCreate(l[2],l[3],g[h].prototype)}},walk:function(g,e,h,d){d=d||this;if(g){if(h){g=g[h]}tinymce.each(g,function(j,f){if(e.call(d,j,f,h)===false){return false}tinymce.walk(j,e,h,d)})}},createNS:function(g,f){var e,d;f=f||window;g=g.split(".");for(e=0;e<g.length;e++){d=g[e];if(!f[d]){f[d]={}}f=f[d]}return f},resolve:function(g,f){var e,d;f=f||b;g=g.split(".");for(e=0,d=g.length;e<d;e++){f=f[g[e]];if(!f){break}}return f},addUnload:function(h,g){var e=this;h={func:h,scope:g||this};if(!e.unloads){function d(){var f=e.unloads,j,k;if(f){for(k in f){j=f[k];if(j&&j.func){j.func.call(j.scope,1)}}if(b.detachEvent){b.detachEvent("onbeforeunload",i);b.detachEvent("onunload",d)}else{if(b.removeEventListener){b.removeEventListener("unload",d,false)}}e.unloads=j=f=w=d=0;if(b.CollectGarbage){CollectGarbage()}}}function i(){var j=document;if(j.readyState=="interactive"){function f(){j.detachEvent("onstop",f);if(d){d()}j=0}if(j){j.attachEvent("onstop",f)}b.setTimeout(function(){if(j){j.detachEvent("onstop",f)}},0)}}if(b.attachEvent){b.attachEvent("onunload",d);b.attachEvent("onbeforeunload",i)}else{if(b.addEventListener){b.addEventListener("unload",d,false)}}e.unloads=[h]}else{e.unloads.push(h)}return h},removeUnload:function(g){var d=this.unloads,e=null;tinymce.each(d,function(h,f){if(h&&h.func==g){d.splice(f,1);e=g;return false}});return e},explode:function(e,f){return e?tinymce.map(e.split(f||","),tinymce.trim):e},_addVer:function(e){var d;if(!this.query){return e}d=(e.indexOf("?")==-1?"?":"&")+this.query;if(e.indexOf("#")==-1){return e+d}return e.replace("#",d+"#")}};tinymce._init()})(window);(function(){if(!window.Prototype){return alert("Load prototype first!")}tinymce.extend(tinymce,{trim:function(b){return b?b.strip():""},inArray:function(b,c){return b&&b.indexOf?b.indexOf(c):-1}});var a={"tinymce.util.JSON":{},};tinymce.onCreate=function(b,e,d){tinymce.extend(d,a[e])}})();tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,h,d,c;e=tinymce.trim(e);g=f.settings=g||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^\w*:?\/\//.test(e)){e=(g.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(g.base_uri.path,e)}e=e.replace(/@@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();tinymce.create("static tinymce.util.JSON",{serialize:function(e){var c,a,d=tinymce.util.JSON.serialize,b;if(e==null){return"null"}b=typeof e;if(b=="string"){a="\bb\tt\nn\ff\rr\"\"''\\\\";return'"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(g,f){c=a.indexOf(f);if(c+1){return"\\"+a.charAt(c+1)}g=f.charCodeAt().toString(16);return"\\u"+"0000".substring(g.length)+g})+'"'}if(b=="object"){if(e.hasOwnProperty&&e instanceof Array){for(c=0,a="[";c<e.length;c++){a+=(c>0?",":"")+d(e[c])}return a+"]"}a="{";for(c in e){a+=typeof e[c]!="function"?(a.length>1?',"':'"')+c+'":'+d(e[c]):""}return a+"}"}return""+e},parse:function(s){try{return eval("("+s+")")}catch(ex){}}});tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var c=tinymce.extend,b=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=c({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=c(this.settings,f);f.success=function(h,g){h=b.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){e.call(f.error_scope||f.scope,h,g)};f.data=b.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(d){var f=d.each,c=d.is,e=d.isWebKit,a=d.isIE,g=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,b=/^([a-z0-9],?)+$/i;d.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(l,j){var i=this,h;i.doc=l;i.win=window;i.files={};i.cssFlicker=false;i.counter=0;i.boxModel=!d.isIE||l.compatMode=="CSS1Compat";i.stdMode=l.documentMode===8;i.settings=j=d.extend({keep_values:false,hex_colors:1,process_html:1},j);if(d.isIE6){try{l.execCommand("BackgroundImageCache",false,true)}catch(k){i.cssFlicker=true}}if(j.valid_styles){i._styles={};f(j.valid_styles,function(n,m){i._styles[m]=d.explode(n)})}d.addUnload(i.destroy,i)},getRoot:function(){var h=this,i=h.settings;return(i&&h.get(i.root_element))||h.doc.body},getViewPort:function(i){var j,h;i=!i?this.win:i;j=i.document;h=this.boxModel?j.documentElement:j.body;return{x:i.pageXOffset||h.scrollLeft,y:i.pageYOffset||h.scrollTop,w:i.innerWidth||h.clientWidth,h:i.innerHeight||h.clientHeight}},getRect:function(k){var j,h=this,i;k=h.get(k);j=h.getPos(k);i=h.getSize(k);return{x:j.x,y:j.y,w:i.w,h:i.h}},getSize:function(l){var j=this,i,k;l=j.get(l);i=j.getStyle(l,"width");k=j.getStyle(l,"height");if(i.indexOf("px")===-1){i=0}if(k.indexOf("px")===-1){k=0}return{w:parseInt(i)||l.offsetWidth||l.clientWidth,h:parseInt(k)||l.offsetHeight||l.clientHeight}},getParent:function(j,i,h){return this.getParents(j,i,h,false)},getParents:function(q,l,j,p){var i=this,h,k=i.settings,m=[];q=i.get(q);p=p===undefined;if(k.strict_root){j=j||i.getRoot()}if(c(l,"string")){h=l;if(l==="*"){l=function(o){return o.nodeType==1}}else{l=function(o){return i.is(o,h)}}}while(q){if(q==j||!q.nodeType||q.nodeType===9){break}if(!l||l(q)){if(p){m.push(q)}else{return q}}q=q.parentNode}return p?m:null},get:function(h){var i;if(h&&this.doc&&typeof(h)=="string"){i=h;h=this.doc.getElementById(h);if(h&&h.id!==i){return this.doc.getElementsByName(i)[1]}}return h},getNext:function(i,h){return this._findSib(i,h,"nextSibling")},getPrev:function(i,h){return this._findSib(i,h,"previousSibling")},select:function(j,i){var h=this;return d.dom.Sizzle(j,h.get(i)||h.get(h.settings.root_element)||h.doc,[])},is:function(k,h){var j;if(k.length===undefined){if(h==="*"){return k.nodeType==1}if(b.test(h)){h=h.toLowerCase().split(/,/);k=k.nodeName.toLowerCase();for(j=h.length-1;j>=0;j--){if(h[j]==k){return true}}return false}}return d.dom.Sizzle.matches(h,k.nodeType?[k]:k).length>0},add:function(l,o,i,k,m){var j=this;return this.run(l,function(q){var n,h;n=c(o,"string")?j.doc.createElement(o):o;j.setAttribs(n,i);if(k){if(k.nodeType){n.appendChild(k)}else{j.setHTML(n,k)}}return !m?q.appendChild(n):n})},create:function(k,i,j){return this.add(this.doc.createElement(k),k,i,j,1)},createHTML:function(q,i,m){var p="",l=this,j;p+="<"+q;for(j in i){if(i.hasOwnProperty(j)){p+=" "+j+'="'+l.encode(i[j])+'"'}}if(d.is(m)){return p+">"+m+"</"+q+">"}return p+" />"},remove:function(j,h){var i=this;return this.run(j,function(o){var m,l,k;m=o.parentNode;if(!m){return null}if(h){for(k=o.childNodes.length-1;k>=0;k--){i.insertAfter(o.childNodes[k],o)}}if(i.fixPsuedoLeaks){m=o.cloneNode(true);h="IELeakGarbageBin";l=i.get(h)||i.add(i.doc.body,"div",{id:h,style:"display:none"});l.appendChild(o);l.innerHTML="";return m}return m.removeChild(o)})},setStyle:function(k,h,i){var j=this;return j.run(k,function(n){var m,l;m=n.style;h=h.replace(/-(\D)/g,function(p,o){return o.toUpperCase()});if(j.pixelStyles.test(h)&&(d.is(i,"number")||/^[\-0-9\.]+$/.test(i))){i+="px"}switch(h){case"opacity":if(a){m.filter=i===""?"":"alpha(opacity="+(i*100)+")";if(!k.currentStyle||!k.currentStyle.hasLayout){m.display="inline-block"}}m[h]=m["-moz-opacity"]=m["-khtml-opacity"]=i||"";break;case"float":a?m.styleFloat=i:m.cssFloat=i;break;default:m[h]=i||""}if(j.settings.update_styles){j.setAttrib(n,"_mce_style")}})},getStyle:function(k,h,j){k=this.get(k);if(!k){return false}if(this.doc.defaultView&&j){h=h.replace(/[A-Z]/g,function(l){return"-"+l});try{return this.doc.defaultView.getComputedStyle(k,null).getPropertyValue(h)}catch(i){return null}}h=h.replace(/-(\D)/g,function(m,l){return l.toUpperCase()});if(h=="float"){h=a?"styleFloat":"cssFloat"}if(k.currentStyle&&j){return k.currentStyle[h]}return k.style[h]},setStyles:function(k,l){var i=this,j=i.settings,h;h=j.update_styles;j.update_styles=0;f(l,function(m,o){i.setStyle(k,o,m)});j.update_styles=h;if(j.update_styles){i.setAttrib(k,j.cssText)}},setAttrib:function(j,k,h){var i=this;if(!j||!k){return}if(i.settings.strict){k=k.toLowerCase()}return this.run(j,function(m){var l=i.settings;switch(k){case"style":if(!c(h,"string")){f(h,function(o,p){i.setStyle(m,p,o)});return}if(l.keep_values){if(h&&!i._isRes(h)){m.setAttribute("_mce_style",h,2)}else{m.removeAttribute("_mce_style",2)}}m.style.cssText=h;break;case"class":m.className=h||"";break;case"src":case"href":if(l.keep_values){if(l.url_converter){h=l.url_converter.call(l.url_converter_scope||i,h,k,m)}i.setAttrib(m,"_mce_"+k,h,2)}break;case"shape":m.setAttribute("_mce_style",h);break}if(c(h)&&h!==null&&h.length!==0){m.setAttribute(k,""+h,2)}else{m.removeAttribute(k,2)}})},setAttribs:function(i,j){var h=this;return this.run(i,function(k){f(j,function(l,m){h.setAttrib(k,m,l)})})},getAttrib:function(k,l,j){var h,i=this;k=i.get(k);if(!k||k.nodeType!==1){return false}if(!c(j)){j=""}if(/^(src|href|style|coords|shape)$/.test(l)){h=k.getAttribute("_mce_"+l);if(h){return h}}if(a&&i.props[l]){h=k[i.props[l]];h=h&&h.nodeValue?h.nodeValue:h}if(!h){h=k.getAttribute(l,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(l)){if(k[i.props[l]]===true&&h===""){return l}return h?l:""}if(k.nodeName==="FORM"&&k.getAttributeNode(l)){return k.getAttributeNode(l).nodeValue}if(l==="style"){h=h||k.style.cssText;if(h){h=i.serializeStyle(i.parseStyle(h),k.nodeName);if(i.settings.keep_values&&!i._isRes(h)){k.setAttribute("_mce_style",h)}}}if(e&&l==="class"&&h){h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(a){switch(l){case"rowspan":case"colspan":if(h===1){h=""}break;case"size":if(h==="+0"||h===20||h===0){h=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(h===0){h=""}break;case"hspace":if(h===-1){h=""}break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768"){h=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535){return l}return j;case"shape":h=h.toLowerCase();break;default:if(l.indexOf("on")===0&&h){h=(""+h).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}}}return(h!==undefined&&h!==null&&h!=="")?""+h:j},getPos:function(p,k){var i=this,h=0,o=0,l,m=i.doc,j;p=i.get(p);k=k||m.body;if(p){if(a&&!i.stdMode){p=p.getBoundingClientRect();l=i.boxModel?m.documentElement:m.body;h=i.getStyle(i.select("html")[0],"borderWidth");h=(h=="medium"||i.boxModel&&!i.isIE6)&&2||h;p.top+=i.win.self!=i.win.top?2:0;return{x:p.left+l.scrollLeft-h,y:p.top+l.scrollTop-h}}j=p;while(j&&j!=k&&j.nodeType){h+=j.offsetLeft||0;o+=j.offsetTop||0;j=j.offsetParent}j=p.parentNode;while(j&&j!=k&&j.nodeType){h-=j.scrollLeft||0;o-=j.scrollTop||0;j=j.parentNode}}return{x:h,y:o}},parseStyle:function(j){var k=this,l=k.settings,m={};if(!j){return m}function h(y,u,x){var q,v,n,o;q=m[y+"-top"+u];if(!q){return}v=m[y+"-right"+u];if(q!=v){return}n=m[y+"-bottom"+u];if(v!=n){return}o=m[y+"-left"+u];if(n!=o){return}m[x]=o;delete m[y+"-top"+u];delete m[y+"-right"+u];delete m[y+"-bottom"+u];delete m[y+"-left"+u]}function i(p,o,n,r){var q;q=m[o];if(!q){return}q=m[n];if(!q){return}q=m[r];if(!q){return}m[p]=m[o]+" "+m[n]+" "+m[r];delete m[o];delete m[n];delete m[r]}j=j.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");f(j.split(";"),function(o){var n,p=[];if(o){o=o.replace(/_MCE_SEMI_/g,";");o=o.replace(/url\([^\)]+\)/g,function(q){p.push(q);return"url("+p.length+")"});o=o.split(":");n=d.trim(o[1]);n=n.replace(/url\(([^\)]+)\)/g,function(r,q){return p[parseInt(q)-1]});n=n.replace(/rgb\([^\)]+\)/g,function(q){return k.toHex(q)});if(l.url_converter){n=n.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(q,r){return"url("+l.url_converter.call(l.url_converter_scope||k,k.decode(r),"style",null)+")"})}m[d.trim(o[0]).toLowerCase()]=n}});h("border","","border");h("border","-width","border-width");h("border","-color","border-color");h("border","-style","border-style");h("padding","","padding");h("margin","","margin");i("border","border-width","border-style","border-color");if(a){if(m.border=="medium none"){m.border=""}}return m},serializeStyle:function(l,h){var i=this,j="";function k(n,m){if(m&&n){if(m.indexOf("-")===0){return}switch(m){case"font-weight":if(n==700){n="bold"}break;case"color":case"background-color":n=n.toLowerCase();break}j+=(j?" ":"")+m+": "+n+";"}}if(h&&i._styles){f(i._styles["*"],function(m){k(l[m],m)});f(i._styles[h.toLowerCase()],function(m){k(l[m],m)})}else{f(l,k)}return j},loadCSS:function(h){var j=this,k=j.doc,i;if(!h){h=""}i=j.select("head")[0];f(h.split(","),function(l){var m;if(j.files[l]){return}j.files[l]=true;m=j.create("link",{rel:"stylesheet",href:d._addVer(l)});if(a&&k.documentMode){m.onload=function(){k.recalc();m.onload=null}}i.appendChild(m)})},addClass:function(h,i){return this.run(h,function(j){var k;if(!i){return 0}if(this.hasClass(j,i)){return j.className}k=this.removeClass(j,i);return j.className=(k!=""?(k+" "):"")+i})},removeClass:function(j,k){var h=this,i;return h.run(j,function(m){var l;if(h.hasClass(m,k)){if(!i){i=new RegExp("(^|\\s+)"+k+"(\\s+|$)","g")}l=m.className.replace(i," ");l=d.trim(l!=" "?l:"");m.className=l;if(!l){m.removeAttribute("class")}return l}return m.className})},hasClass:function(i,h){i=this.get(i);if(!i||!h){return false}return(" "+i.className+" ").indexOf(" "+h+" ")!==-1},show:function(h){return this.setStyle(h,"display","block")},hide:function(h){return this.setStyle(h,"display","none")},isHidden:function(h){h=this.get(h);return !h||h.style.display=="none"||this.getStyle(h,"display")=="none"},uniqueId:function(h){return(!h?"mce_":h)+(this.counter++)},setHTML:function(k,j){var i=this;return this.run(k,function(q){var h,m,l,s,o,h;j=i.processHTML(j);if(a){function r(){try{q.innerHTML="<br />"+j;q.removeChild(q.firstChild)}catch(n){while(q.firstChild){q.firstChild.removeNode()}h=i.create("div");h.innerHTML="<br />"+j;f(h.childNodes,function(u,p){if(p){q.appendChild(u)}})}}if(i.settings.fix_ie_paragraphs){j=j.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>')}r();if(i.settings.fix_ie_paragraphs){l=q.getElementsByTagName("p");for(m=l.length-1,h=0;m>=0;m--){s=l[m];if(!s.hasChildNodes()){if(!s._mce_keep){h=1;break}s.removeAttribute("_mce_keep")}}}if(h){j=j.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');j=j.replace(/<\/p>/g,"</div>");r();if(i.settings.fix_ie_paragraphs){l=q.getElementsByTagName("DIV");for(m=l.length-1;m>=0;m--){s=l[m];if(s._mce_tmp){o=i.doc.createElement("p");s.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(p,n){var u;if(n!=="_mce_tmp"){u=s.getAttribute(n);if(!u&&n==="class"){u=s.className}o.setAttribute(n,u)}});for(h=0;h<s.childNodes.length;h++){o.appendChild(s.childNodes[h].cloneNode(true))}s.swapNode(o)}}}}}else{q.innerHTML=j}return j})},processHTML:function(l){var j=this,k=j.settings,m=[];if(!k.process_html){return l}if(a){l=l.replace(/&apos;/g,"&#39;");l=l.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}l=l.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(k.keep_values){if(/<script|noscript|style/i.test(l)){function i(h){h=h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n");h=h.replace(/^[\r\n]*|[\r\n]*$/g,"");h=h.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");h=h.replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"");return h}l=l.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(h,o,n){if(!o){o=' type="text/javascript"'}o=o.replace(/src=\"([^\"]+)\"?/i,function(p,q){if(k.url_converter){q=j.encode(k.url_converter.call(k.url_converter_scope||j,j.decode(q),"src","script"))}return'_mce_src="'+q+'"'});if(d.trim(n)){m.push(i(n));n="<!--\nMCE_SCRIPT:"+(m.length-1)+"\n// -->"}return"<mce:script"+o+">"+n+"</mce:script>"});l=l.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(h,o,n){if(n){m.push(i(n));n="<!--\nMCE_SCRIPT:"+(m.length-1)+"\n-->"}return"<mce:style"+o+">"+n+"</mce:style><style "+o+' _mce_bogus="1">'+n+"</style>"});l=l.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(h,o,n){return"<mce:noscript"+o+"><!--"+j.encode(n).replace(/--/g,"&#45;&#45;")+"--></mce:noscript>"})}l=l.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]-->");l=l.replace(/<([\w:]+) [^>]*(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)[^>]*>/gi,function(n){function h(q,o,p){if(p==="false"||p==="0"){return""}return" "+o+'="'+o+'"'}n=n.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=[\"]([^\"]+)[\"]/gi,h);n=n.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=[\']([^\']+)[\']/gi,h);n=n.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=([^\s\"\'>]+)/gi,h);n=n.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)([\s>])/gi,' $1="$1"$2');return n});l=l.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(h,p){function o(q,n,s){var r=s;if(h.indexOf("_mce_"+n)!=-1){return q}if(n=="style"){if(j._isRes(s)){return q}r=j.encode(j.serializeStyle(j.parseStyle(r),p))}else{if(n!="coords"&&n!="shape"){if(k.url_converter){r=j.encode(k.url_converter.call(k.url_converter_scope||j,j.decode(s),n,p))}}}return" "+n+'="'+s+'" _mce_'+n+'="'+r+'"'}h=h.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,o);h=h.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,o);return h.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,o)});l=l.replace(/MCE_SCRIPT:([0-9]+)/g,function(n,h){return m[h]})}return l},getOuterHTML:function(h){var i;h=this.get(h);if(!h){return null}if(h.outerHTML!==undefined){return h.outerHTML}i=(h.ownerDocument||this.doc).createElement("body");i.appendChild(h.cloneNode(true));return i.innerHTML},setOuterHTML:function(l,j,m){var i=this;function k(p,o,r){var s,q;q=r.createElement("body");q.innerHTML=o;s=q.lastChild;while(s){i.insertAfter(s.cloneNode(true),p);s=s.previousSibling}i.remove(p)}return this.run(l,function(n){n=i.get(n);if(n.nodeType==1){m=m||n.ownerDocument||i.doc;if(a){try{if(a&&n.nodeType==1){n.outerHTML=j}else{k(n,j,m)}}catch(h){k(n,j,m)}}else{k(n,j,m)}}})},decode:function(i){var j,k,h;if(/&[^;]+;/.test(i)){j=this.doc.createElement("div");j.innerHTML=i;k=j.firstChild;h="";if(k){do{h+=k.nodeValue}while(k=k.nextSibling)}return h||i}return i},encode:function(h){return h?(""+h).replace(/[<>&\"]/g,function(j,i){switch(j){case"&":return"&amp;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;"}return j}):h},insertAfter:function(j,i){var h=this;i=h.get(i);return this.run(j,function(m){var l,k;l=i.parentNode;k=i.nextSibling;if(k){l.insertBefore(m,k)}else{l.appendChild(m)}return m})},isBlock:function(h){if(h.nodeType&&h.nodeType!==1){return false}h=h.nodeName||h;return g.test(h)},replace:function(l,j,h){var i=this;if(c(j,"array")){l=l.cloneNode(true)}return i.run(j,function(k){if(h){f(d.grep(k.childNodes),function(m){l.appendChild(m)})}if(i.fixPsuedoLeaks&&k.nodeType===1){k.parentNode.insertBefore(l,k);i.remove(k);return l}return k.parentNode.replaceChild(l,k)})},rename:function(k,h){var j=this,i;if(k.nodeName!=h.toUpperCase()){i=j.create(h);f(j.getAttribs(k),function(l){j.setAttrib(i,l.nodeName,j.getAttrib(k,l.nodeName))});j.replace(i,k,1)}return i||k},findCommonAncestor:function(j,h){var k=j,i;while(k){i=h;while(i&&k!=i){i=i.parentNode}if(k==i){break}k=k.parentNode}if(!k&&j.ownerDocument){return j.ownerDocument.documentElement}return k},toHex:function(h){var j=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(h);function i(k){k=parseInt(k).toString(16);return k.length>1?k:"0"+k}if(j){h="#"+i(j[1])+i(j[2])+i(j[3]);return h}return h},getClasses:function(){var m=this,h=[],l,n={},o=m.settings.class_filter,k;if(m.classes){return m.classes}function p(i){f(i.imports,function(q){p(q)});f(i.cssRules||i.rules,function(q){switch(q.type||1){case 1:if(q.selectorText){f(q.selectorText.split(","),function(r){r=r.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(r)||!/\.[\w\-]+$/.test(r)){return}k=r;r=r.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(o&&!(r=o(r,k))){return}if(!n[r]){h.push({"class":r});n[r]=1}})}break;case 3:p(q.styleSheet);break}})}try{f(m.doc.styleSheets,p)}catch(j){}if(h.length>0){m.classes=h}return h},run:function(k,j,i){var h=this,l;if(h.doc&&typeof(k)==="string"){k=h.get(k)}if(!k){return false}i=i||this;if(!k.nodeType&&(k.length||k.length===0)){l=[];f(k,function(n,m){if(n){if(typeof(n)=="string"){n=h.doc.getElementById(n)}l.push(j.call(i,n,m))}});return l}return j.call(i,k)},getAttribs:function(i){var h;i=this.get(i);if(!i){return[]}if(a){h=[];if(i.nodeName=="OBJECT"){return i.attributes}if(i.nodeName==="OPTION"&&this.getAttrib(i,"selected")){h.push({specified:1,nodeName:"selected"})}i.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(j){h.push({specified:1,nodeName:j})});return h}return i.attributes},destroy:function(i){var h=this;if(h.events){h.events.destroy()}h.win=h.doc=h.root=h.events=null;if(!i){d.removeUnload(h.destroy)}},createRng:function(){var h=this.doc;return h.createRange?h.createRange():new d.dom.Range(this)},nodeIndex:function(j,k){var h=0,i;for(j=j;j;h++,j=j.previousSibling){if(k){if(j.nodeType==3){if((i&&i.nodeType==3)||j.nodeValue.length===0){h--}}i=j}}return h-1},split:function(l,k,o){var p=this,h=p.createRng(),m,j,n;function i(s){var r,q=s.childNodes;if(s.nodeType==1&&s.getAttribute("_mce_type")=="bookmark"){return}for(r=q.length-1;r>=0;r--){i(q[r])}if(s.nodeType!=9){if(s.nodeType==3&&s.nodeValue.length>0){return}if(s.nodeType==1){q=s.childNodes;if(q.length==1&&q[0]&&q[0].nodeType==1&&q[0].getAttribute("_mce_type")=="bookmark"){s.parentNode.insertBefore(q[0],s)}if(q.length||/^(br|hr|input|img)$/.test(s.nodeName)){return}}p.remove(s)}return s}if(l&&k){h.setStart(l.parentNode,p.nodeIndex(l));h.setEnd(k.parentNode,p.nodeIndex(k));m=h.extractContents();h=p.createRng();h.setStart(k.parentNode,p.nodeIndex(k)+1);h.setEnd(l.parentNode,p.nodeIndex(l)+1);j=h.extractContents();n=l.parentNode;n.insertBefore(i(m),l);if(o){n.replaceChild(o,k)}else{n.insertBefore(k,l)}n.insertBefore(i(j),l);p.remove(l);return o||k}},bind:function(l,h,k,j){var i=this;if(!i.events){i.events=new d.dom.EventUtils()}return i.events.add(l,h,k,j||this)},unbind:function(k,h,j){var i=this;if(!i.events){i.events=new d.dom.EventUtils()}return i.events.remove(k,h,j)},_findSib:function(k,h,i){var j=this,l=h;if(k){if(c(l,"string")){l=function(m){return j.is(m,h)}}for(k=k[i];k;k=k[i]){if(l(k)){return k}}}return null},_isRes:function(h){return/^(top|left|bottom|right|width|height)/i.test(h)||/;\s*(top|left|bottom|right|width|height)/i.test(h)}});d.DOM=new d.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var N=this,e=c.doc,S=0,E=1,j=2,D=true,R=false,U="startOffset",h="startContainer",P="endContainer",z="endOffset",k=tinymce.extend,n=c.nodeIndex;k(N,{startContainer:e,startOffset:0,endContainer:e,endOffset:0,collapsed:D,commonAncestorContainer:e,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:q,setEnd:s,setStartBefore:g,setStartAfter:I,setEndBefore:J,setEndAfter:u,collapse:A,selectNode:x,selectNodeContents:F,compareBoundaryPoints:v,deleteContents:p,extractContents:H,cloneContents:d,insertNode:C,surroundContents:M,cloneRange:K});function q(W,V){B(D,W,V)}function s(W,V){B(R,W,V)}function g(V){q(V.parentNode,n(V))}function I(V){q(V.parentNode,n(V)+1)}function J(V){s(V.parentNode,n(V))}function u(V){s(V.parentNode,n(V)+1)}function A(V){if(V){N[P]=N[h];N[z]=N[U]}else{N[h]=N[P];N[U]=N[z]}N.collapsed=D}function x(V){g(V);u(V)}function F(V){q(V,0);s(V,V.nodeType===1?V.childNodes.length:V.nodeValue.length)}function v(X,Y){var aa=N[h],Z=N[U],W=N[P],V=N[z];if(X===0){return G(aa,Z,aa,Z)}if(X===1){return G(aa,Z,W,V)}if(X===2){return G(W,V,W,V)}if(X===3){return G(W,V,aa,Z)}}function p(){m(j)}function H(){return m(S)}function d(){return m(E)}function C(X){var W,V;if(X.nodeType===3||X.nodeType===4){W=N[h].splitText(N[U]);N[h].parentNode.insertBefore(X,W)}else{if(N[h].childNodes.length>0){V=N[h].childNodes[N[U]]}N[h].insertBefore(X,V)}}function M(W){var V=N.extractContents();N.insertNode(W);W.appendChild(V);N.selectNode(W)}function K(){return k(new b(c),{startContainer:N[h],startOffset:N[U],endContainer:N[P],endOffset:N[z],collapsed:N.collapsed,commonAncestorContainer:N.commonAncestorContainer})}function O(V,W){var X;if(V.nodeType==3){return V}if(W<0){return V}X=V.firstChild;while(X&&W>0){--W;X=X.nextSibling}if(X){return X}return V}function l(){return(N[h]==N[P]&&N[U]==N[z])}function G(Y,aa,W,Z){var ab,X,V,ac,ae,ad;if(Y==W){if(aa==Z){return 0}if(aa<Z){return -1}return 1}ab=W;while(ab&&ab.parentNode!=Y){ab=ab.parentNode}if(ab){X=0;V=Y.firstChild;while(V!=ab&&X<aa){X++;V=V.nextSibling}if(aa<=X){return -1}return 1}ab=Y;while(ab&&ab.parentNode!=W){ab=ab.parentNode}if(ab){X=0;V=W.firstChild;while(V!=ab&&X<Z){X++;V=V.nextSibling}if(X<Z){return -1}return 1}ac=c.findCommonAncestor(Y,W);ae=Y;while(ae&&ae.parentNode!=ac){ae=ae.parentNode}if(!ae){ae=ac}ad=W;while(ad&&ad.parentNode!=ac){ad=ad.parentNode}if(!ad){ad=ac}if(ae==ad){return 0}V=ac.firstChild;while(V){if(V==ae){return -1}if(V==ad){return 1}V=V.nextSibling}}function B(W,Z,Y){var V,X;if(W){N[h]=Z;N[U]=Y}else{N[P]=Z;N[z]=Y}V=N[P];while(V.parentNode){V=V.parentNode}X=N[h];while(X.parentNode){X=X.parentNode}if(X==V){if(G(N[h],N[U],N[P],N[z])>0){N.collapse(W)}}else{N.collapse(W)}N.collapsed=l();N.commonAncestorContainer=c.findCommonAncestor(N[h],N[P])}function m(ac){var ab,Y=0,ae=0,W,aa,X,Z,V,ad;if(N[h]==N[P]){return f(ac)}for(ab=N[P],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==N[h]){return r(ab,ac)}++Y}for(ab=N[h],W=ab.parentNode;W;ab=W,W=W.parentNode){if(W==N[P]){return T(ab,ac)}++ae}aa=ae-Y;X=N[h];while(aa>0){X=X.parentNode;aa--}Z=N[P];while(aa<0){Z=Z.parentNode;aa++}for(V=X.parentNode,ad=Z.parentNode;V!=ad;V=V.parentNode,ad=ad.parentNode){X=V;Z=ad}return o(X,Z,ac)}function f(aa){var ac,Z,Y,ab,V,X,W;if(aa!=j){ac=e.createDocumentFragment()}if(N[U]==N[z]){return ac}if(N[h].nodeType==3){Z=N[h].nodeValue;Y=Z.substring(N[U],N[z]);if(aa!=E){N[h].deleteData(N[U],N[z]-N[U]);N.collapse(D)}if(aa==j){return}ac.appendChild(e.createTextNode(Y));return ac}ab=O(N[h],N[U]);V=N[z]-N[U];while(V>0){X=ab.nextSibling;W=y(ab,aa);if(ac){ac.appendChild(W)}--V;ab=X}if(aa!=E){N.collapse(D)}return ac}function r(ac,Z){var ab,aa,W,V,Y,X;if(Z!=j){ab=e.createDocumentFragment()}aa=i(ac,Z);if(ab){ab.appendChild(aa)}W=n(ac);V=W-N[U];if(V<=0){if(Z!=E){N.setEndBefore(ac);N.collapse(R)}return ab}aa=ac.previousSibling;while(V>0){Y=aa.previousSibling;X=y(aa,Z);if(ab){ab.insertBefore(X,ab.firstChild)}--V;aa=Y}if(Z!=E){N.setEndBefore(ac);N.collapse(R)}return ab}function T(aa,Z){var ac,W,ab,V,Y,X;if(Z!=j){ac=e.createDocumentFragment()}ab=Q(aa,Z);if(ac){ac.appendChild(ab)}W=n(aa);++W;V=N[z]-W;ab=aa.nextSibling;while(V>0){Y=ab.nextSibling;X=y(ab,Z);if(ac){ac.appendChild(X)}--V;ab=Y}if(Z!=E){N.setStartAfter(aa);N.collapse(D)}return ac}function o(aa,V,ad){var X,af,Z,ab,ac,W,ae,Y;if(ad!=j){af=e.createDocumentFragment()}X=Q(aa,ad);if(af){af.appendChild(X)}Z=aa.parentNode;ab=n(aa);ac=n(V);++ab;W=ac-ab;ae=aa.nextSibling;while(W>0){Y=ae.nextSibling;X=y(ae,ad);if(af){af.appendChild(X)}ae=Y;--W}X=i(V,ad);if(af){af.appendChild(X)}if(ad!=E){N.setStartAfter(aa);N.collapse(D)}return af}function i(ab,ac){var X=O(N[P],N[z]-1),ad,aa,Z,V,W,Y=X!=N[P];if(X==ab){return L(X,Y,R,ac)}ad=X.parentNode;aa=L(ad,R,R,ac);while(ad){while(X){Z=X.previousSibling;V=L(X,Y,R,ac);if(ac!=j){aa.insertBefore(V,aa.firstChild)}Y=D;X=Z}if(ad==ab){return aa}X=ad.previousSibling;ad=ad.parentNode;W=L(ad,R,R,ac);if(ac!=j){W.appendChild(aa)}aa=W}}function Q(ab,ac){var Y=O(N[h],N[U]),Z=Y!=N[h],ad,aa,X,V,W;if(Y==ab){return L(Y,Z,D,ac)}ad=Y.parentNode;aa=L(ad,R,D,ac);while(ad){while(Y){X=Y.nextSibling;V=L(Y,Z,D,ac);if(ac!=j){aa.appendChild(V)}Z=D;Y=X}if(ad==ab){return aa}Y=ad.nextSibling;ad=ad.parentNode;W=L(ad,R,D,ac);if(ac!=j){W.appendChild(aa)}aa=W}}function L(V,Z,ac,ad){var Y,X,aa,W,ab;if(Z){return y(V,ad)}if(V.nodeType==3){Y=V.nodeValue;if(ac){W=N[U];X=Y.substring(W);aa=Y.substring(0,W)}else{W=N[z];X=Y.substring(0,W);aa=Y.substring(W)}if(ad!=E){V.nodeValue=aa}if(ad==j){return}ab=V.cloneNode(R);ab.nodeValue=X;return ab}if(ad==j){return}return V.cloneNode(R)}function y(W,V){if(V!=j){return V==E?W.cloneNode(D):W}W.parentNode.removeChild(W)}}a.Range=b})(tinymce.dom);(function(){function a(e){var d=this,i="\uFEFF",b,h,g=e.dom;function c(k,j){if(k&&j){if(k.item&&j.item&&k.item(0)===j.item(0)){return 1}if(k.isEqual&&j.isEqual&&j.isEqual(k)){return 1}}return 0}function f(){var n=e.getRng(),j=g.createRng(),k,l,p,o;l=n.item?n.item(0):n.parentElement();if(l.ownerDocument!=g.doc){return j}if(n.item||!l.hasChildNodes()){j.setStart(l.parentNode,g.nodeIndex(l));j.setEnd(j.startContainer,j.startOffset+1);return j}k=n.duplicate();p=e.isCollapsed();n.collapse();n.pasteHTML('<span id="_mce_start" style="display:none;line-height:0">\uFEFF</span>');if(!p){k.collapse(false);k.pasteHTML('<span id="_mce_end" style="display:none;line-height:0">\uFEFF</span>')}function m(v){var r,u,q,s;q=g.get("_mce_"+(v?"start":"end"));s=q.previousSibling;if(s&&s.nodeType==3){r=s;u=r.nodeValue.length;g.remove(q);s=r.nextSibling;if(s&&s.nodeType==3){o=true;r.appendData(s.nodeValue);g.remove(s)}}else{s=q.nextSibling;if(s&&s.nodeType==3){r=s;u=0}else{if(s){u=g.nodeIndex(s)-1}else{u=g.nodeIndex(q)}r=q.parentNode}g.remove(q)}if(v){j.setStart(r,u)}if(!v||p){j.setEnd(r,u)}}m(true);if(!p){m(false)}if(o){d.addRange(j)}return j}this.addRange=function(k){var s,z,y=e.dom.doc,q=y.body,u,m,x,n,r,j,o,p,v,l;this.destroy();x=k.startContainer;n=k.startOffset;r=k.endContainer;j=k.endOffset;s=q.createTextRange();if(x.nodeType==1&&x.hasChildNodes()){p=x.childNodes.length-1;if(n>p){v=1;x=x.childNodes[p]}else{x=x.childNodes[n]}if(x.nodeType==3){n=0}}if(r.nodeType==1&&r.hasChildNodes()){p=r.childNodes.length-1;if(j==0){l=1;r=r.childNodes[0]}else{r=r.childNodes[Math.min(p,j-1)];if(r.nodeType==3){j=r.nodeValue.length}}}if(x==r&&x.nodeType==1){if(/^(IMG|TABLE)$/.test(x.nodeName)&&n!=j){s=q.createControlRange();s.addElement(x)}else{s=q.createTextRange();if(!x.hasChildNodes()&&x.canHaveHTML){x.innerHTML=i}s.moveToElementText(x);if(x.innerHTML==i){s.collapse(true);x.removeChild(x.firstChild)}}if(n==j){s.collapse(j<=k.endContainer.childNodes.length-1)}s.select();s.scrollIntoView();return}s=q.createTextRange();o=y.createElement("span");o.innerHTML=" ";if(x.nodeType==3){if(v){g.insertAfter(o,x)}else{x.parentNode.insertBefore(o,x)}s.moveToElementText(o);o.parentNode.removeChild(o);s.move("character",n)}else{s.moveToElementText(x);if(v){s.collapse(false)}}if(x==r&&x.nodeType==3){s.moveEnd("character",j-n);s.select();s.scrollIntoView();return}z=q.createTextRange();if(r.nodeType==3){r.parentNode.insertBefore(o,r);z.moveToElementText(o);o.parentNode.removeChild(o);z.move("character",j);s.setEndPoint("EndToStart",z)}else{z.moveToElementText(r);z.collapse(!!l);s.setEndPoint("EndToEnd",z)}s.select();s.scrollIntoView()};this.getRangeAt=function(){if(!b||!c(h,e.getRng())){b=f();h=e.getRng()}return b};this.destroy=function(){h=b=null};if(e.dom.boxModel){(function(){var p=g.doc,k=p.body,m,n;p.documentElement.unselectable=true;function o(q,u){var r=k.createTextRange();try{r.moveToPoint(q,u)}catch(s){r=null}return r}function l(r){var q;if(r.button){q=o(r.x,r.y);if(q){if(q.compareEndPoints("StartToStart",n)>0){q.setEndPoint("StartToStart",n)}else{q.setEndPoint("EndToEnd",n)}q.select()}}else{j()}}function j(){g.unbind(p,"mouseup",j);g.unbind(p,"mousemove",l);m=0}g.bind(p,"mousedown",function(q){if(q.target.nodeName==="HTML"){if(m){j()}m=1;n=o(q.x,q.y);if(n){g.bind(p,"mouseup",j);g.bind(p,"mousemove",l);n.select()}}})})()}}tinymce.dom.TridentSelection=a})();(function(){var p=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,i=0,d=Object.prototype.toString,n=false;var b=function(F,u,C,x){C=C||[];var e=u=u||document;if(u.nodeType!==1&&u.nodeType!==9){return[]}if(!F||typeof F!=="string"){return C}var D=[],E,A,I,H,B,s,r=true,y=o(u);p.lastIndex=0;while((E=p.exec(F))!==null){D.push(E[1]);if(E[2]){s=RegExp.rightContext;break}}if(D.length>1&&j.exec(F)){if(D.length===2&&f.relative[D[0]]){A=g(D[0]+D[1],u)}else{A=f.relative[D[0]]?[u]:b(D.shift(),u);while(D.length){F=D.shift();if(f.relative[F]){F+=D.shift()}A=g(F,A)}}}else{if(!x&&D.length>1&&u.nodeType===9&&!y&&f.match.ID.test(D[0])&&!f.match.ID.test(D[D.length-1])){var J=b.find(D.shift(),u,y);u=J.expr?b.filter(J.expr,J.set)[0]:J.set[0]}if(u){var J=x?{expr:D.pop(),set:a(x)}:b.find(D.pop(),D.length===1&&(D[0]==="~"||D[0]==="+")&&u.parentNode?u.parentNode:u,y);A=J.expr?b.filter(J.expr,J.set):J.set;if(D.length>0){I=a(A)}else{r=false}while(D.length){var v=D.pop(),z=v;if(!f.relative[v]){v=""}else{z=D.pop()}if(z==null){z=u}f.relative[v](I,z,y)}}else{I=D=[]}}if(!I){I=A}if(!I){throw"Syntax error, unrecognized expression: "+(v||F)}if(d.call(I)==="[object Array]"){if(!r){C.push.apply(C,I)}else{if(u&&u.nodeType===1){for(var G=0;I[G]!=null;G++){if(I[G]&&(I[G]===true||I[G].nodeType===1&&h(u,I[G]))){C.push(A[G])}}}else{for(var G=0;I[G]!=null;G++){if(I[G]&&I[G].nodeType===1){C.push(A[G])}}}}}else{a(I,C)}if(s){b(s,e,C,x);b.uniqueSort(C)}return C};b.uniqueSort=function(r){if(c){n=false;r.sort(c);if(n){for(var e=1;e<r.length;e++){if(r[e]===r[e-1]){r.splice(e--,1)}}}}};b.matches=function(e,r){return b(e,null,null,r)};b.find=function(z,e,A){var y,v;if(!z){return[]}for(var u=0,s=f.order.length;u<s;u++){var x=f.order[u],v;if((v=f.match[x].exec(z))){var r=RegExp.leftContext;if(r.substr(r.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");y=f.find[x](v,e,A);if(y!=null){z=z.replace(f.match[x],"");break}}}}if(!y){y=e.getElementsByTagName("*")}return{set:y,expr:z}};b.filter=function(C,B,F,u){var s=C,H=[],z=B,x,e,y=B&&B[0]&&o(B[0]);while(C&&B.length){for(var A in f.filter){if((x=f.match[A].exec(C))!=null){var r=f.filter[A],G,E;e=false;if(z==H){H=[]}if(f.preFilter[A]){x=f.preFilter[A](x,z,F,H,u,y);if(!x){e=G=true}else{if(x===true){continue}}}if(x){for(var v=0;(E=z[v])!=null;v++){if(E){G=r(E,x,v,z);var D=u^!!G;if(F&&G!=null){if(D){e=true}else{z[v]=false}}else{if(D){H.push(E);e=true}}}}}if(G!==undefined){if(!F){z=H}C=C.replace(f.match[A],"");if(!e){return[]}break}}}if(C==s){if(e==null){throw"Syntax error, unrecognized expression: "+C}else{break}}s=C}return z};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(z,e,y){var v=typeof e==="string",A=v&&!/\W/.test(e),x=v&&!A;if(A&&!y){e=e.toUpperCase()}for(var u=0,s=z.length,r;u<s;u++){if((r=z[u])){while((r=r.previousSibling)&&r.nodeType!==1){}z[u]=x||r&&r.nodeName===e?r||false:r===e}}if(x){b.filter(e,z,true)}},">":function(y,r,z){var v=typeof r==="string";if(v&&!/\W/.test(r)){r=z?r:r.toUpperCase();for(var s=0,e=y.length;s<e;s++){var x=y[s];if(x){var u=x.parentNode;y[s]=u.nodeName===r?u:false}}}else{for(var s=0,e=y.length;s<e;s++){var x=y[s];if(x){y[s]=v?x.parentNode:x.parentNode===r}}if(v){b.filter(r,y,true)}}},"":function(u,r,x){var s=i++,e=q;if(!r.match(/\W/)){var v=r=x?r:r.toUpperCase();e=m}e("parentNode",r,s,u,v,x)},"~":function(u,r,x){var s=i++,e=q;if(typeof r==="string"&&!r.match(/\W/)){var v=r=x?r:r.toUpperCase();e=m}e("previousSibling",r,s,u,v,x)}},find:{ID:function(r,s,u){if(typeof s.getElementById!=="undefined"&&!u){var e=s.getElementById(r[1]);return e?[e]:[]}},NAME:function(s,x,y){if(typeof x.getElementsByName!=="undefined"){var r=[],v=x.getElementsByName(s[1]);for(var u=0,e=v.length;u<e;u++){if(v[u].getAttribute("name")===s[1]){r.push(v[u])}}return r.length===0?null:r}},TAG:function(e,r){return r.getElementsByTagName(e[1])}},preFilter:{CLASS:function(u,r,s,e,y,z){u=" "+u[1].replace(/\\/g,"")+" ";if(z){return u}for(var v=0,x;(x=r[v])!=null;v++){if(x){if(y^(x.className&&(" "+x.className+" ").indexOf(u)>=0)){if(!s){e.push(x)}}else{if(s){r[v]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(r,e){for(var s=0;e[s]===false;s++){}return e[s]&&o(e[s])?r[1]:r[1].toUpperCase()},CHILD:function(e){if(e[1]=="nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]=="even"&&"2n"||e[2]=="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(r[1]+(r[2]||1))-0;e[3]=r[3]-0}e[0]=i++;return e},ATTR:function(v,r,s,e,x,y){var u=v[1].replace(/\\/g,"");if(!y&&f.attrMap[u]){v[1]=f.attrMap[u]}if(v[2]==="~="){v[4]=" "+v[4]+" "}return v},PSEUDO:function(v,r,s,e,x){if(v[1]==="not"){if(v[3].match(p).length>1||/^\w/.test(v[3])){v[3]=b(v[3],null,null,r)}else{var u=b.filter(v[3],r,s,true^x);if(!s){e.push.apply(e,u)}return false}}else{if(f.match.POS.test(v[0])||f.match.CHILD.test(v[0])){return true}}return v},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(s,r,e){return !!b(e[3],s).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toUpperCase()==="BUTTON"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(r,e){return e===0},last:function(s,r,e,u){return r===u.length-1},even:function(r,e){return e%2===0},odd:function(r,e){return e%2===1},lt:function(s,r,e){return r<e[3]-0},gt:function(s,r,e){return r>e[3]-0},nth:function(s,r,e){return e[3]-0==r},eq:function(s,r,e){return e[3]-0==r}},filter:{PSEUDO:function(y,s,u,z){var r=s[1],v=f.filters[r];if(v){return v(y,u,s,z)}else{if(r==="contains"){return(y.textContent||y.innerText||"").indexOf(s[3])>=0}else{if(r==="not"){var x=s[3];for(var u=0,e=x.length;u<e;u++){if(x[u]===y){return false}}return true}}}},CHILD:function(e,u){var y=u[1],r=e;switch(y){case"only":case"first":while(r=r.previousSibling){if(r.nodeType===1){return false}}if(y=="first"){return true}r=e;case"last":while(r=r.nextSibling){if(r.nodeType===1){return false}}return true;case"nth":var s=u[2],B=u[3];if(s==1&&B==0){return true}var x=u[0],A=e.parentNode;if(A&&(A.sizcache!==x||!e.nodeIndex)){var v=0;for(r=A.firstChild;r;r=r.nextSibling){if(r.nodeType===1){r.nodeIndex=++v}}A.sizcache=x}var z=e.nodeIndex-B;if(s==0){return z==0}else{return(z%s==0&&z/s>=0)}}},ID:function(r,e){return r.nodeType===1&&r.getAttribute("id")===e},TAG:function(r,e){return(e==="*"&&r.nodeType===1)||r.nodeName===e},CLASS:function(r,e){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(x,u){var s=u[1],e=f.attrHandle[s]?f.attrHandle[s](x):x[s]!=null?x[s]:x.getAttribute(s),y=e+"",v=u[2],r=u[4];return e==null?v==="!=":v==="="?y===r:v==="*="?y.indexOf(r)>=0:v==="~="?(" "+y+" ").indexOf(r)>=0:!r?y&&e!==false:v==="!="?y!=r:v==="^="?y.indexOf(r)===0:v==="$="?y.substr(y.length-r.length)===r:v==="|="?y===r||y.substr(0,r.length+1)===r+"-":false},POS:function(v,r,s,x){var e=r[2],u=f.setFilters[e];if(u){return u(v,s,r,x)}}}};var j=f.match.POS;for(var l in f.match){f.match[l]=new RegExp(f.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var a=function(r,e){r=Array.prototype.slice.call(r);if(e){e.push.apply(e,r);return e}return r};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(k){a=function(v,u){var r=u||[];if(d.call(v)==="[object Array]"){Array.prototype.push.apply(r,v)}else{if(typeof v.length==="number"){for(var s=0,e=v.length;s<e;s++){r.push(v[s])}}else{for(var s=0;v[s];s++){r.push(v[s])}}}return r}}var c;if(document.documentElement.compareDocumentPosition){c=function(r,e){var s=r.compareDocumentPosition(e)&4?-1:r===e?0:1;if(s===0){n=true}return s}}else{if("sourceIndex" in document.documentElement){c=function(r,e){var s=r.sourceIndex-e.sourceIndex;if(s===0){n=true}return s}}else{if(document.createRange){c=function(u,r){var s=u.ownerDocument.createRange(),e=r.ownerDocument.createRange();s.setStart(u,0);s.setEnd(u,0);e.setStart(r,0);e.setEnd(r,0);var v=s.compareBoundaryPoints(Range.START_TO_END,e);if(v===0){n=true}return v}}}}(function(){var r=document.createElement("div"),s="script"+(new Date).getTime();r.innerHTML="<a name='"+s+"'/>";var e=document.documentElement;e.insertBefore(r,e.firstChild);if(!!document.getElementById(s)){f.find.ID=function(v,x,y){if(typeof x.getElementById!=="undefined"&&!y){var u=x.getElementById(v[1]);return u?u.id===v[1]||typeof u.getAttributeNode!=="undefined"&&u.getAttributeNode("id").nodeValue===v[1]?[u]:undefined:[]}};f.filter.ID=function(x,u){var v=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&v&&v.nodeValue===u}}e.removeChild(r)})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){f.find.TAG=function(r,x){var v=x.getElementsByTagName(r[1]);if(r[1]==="*"){var u=[];for(var s=0;v[s];s++){if(v[s].nodeType===1){u.push(v[s])}}v=u}return v}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){f.attrHandle.href=function(r){return r.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var e=b,s=document.createElement("div");s.innerHTML="<p class='TEST'></p>";if(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0){return}b=function(y,x,u,v){x=x||document;if(!v&&x.nodeType===9&&!o(x)){try{return a(x.querySelectorAll(y),u)}catch(z){}}return e(y,x,u,v)};for(var r in e){b[r]=e[r]}})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}f.order.splice(1,0,"CLASS");f.find.CLASS=function(r,s,u){if(typeof s.getElementsByClassName!=="undefined"&&!u){return s.getElementsByClassName(r[1])}}})()}function m(r,y,x,C,z,B){var A=r=="previousSibling"&&!B;for(var u=0,s=C.length;u<s;u++){var e=C[u];if(e){if(A&&e.nodeType===1){e.sizcache=x;e.sizset=u}e=e[r];var v=false;while(e){if(e.sizcache===x){v=C[e.sizset];break}if(e.nodeType===1&&!B){e.sizcache=x;e.sizset=u}if(e.nodeName===y){v=e;break}e=e[r]}C[u]=v}}}function q(r,y,x,C,z,B){var A=r=="previousSibling"&&!B;for(var u=0,s=C.length;u<s;u++){var e=C[u];if(e){if(A&&e.nodeType===1){e.sizcache=x;e.sizset=u}e=e[r];var v=false;while(e){if(e.sizcache===x){v=C[e.sizset];break}if(e.nodeType===1){if(!B){e.sizcache=x;e.sizset=u}if(typeof y!=="string"){if(e===y){v=true;break}}else{if(b.filter(y,[e]).length>0){v=e;break}}}e=e[r]}C[u]=v}}}var h=document.compareDocumentPosition?function(r,e){return r.compareDocumentPosition(e)&16}:function(r,e){return r!==e&&(r.contains?r.contains(e):true)};var o=function(e){return e.nodeType===9&&e.documentElement.nodeName!=="HTML"||!!e.ownerDocument&&e.ownerDocument.documentElement.nodeName!=="HTML"};var g=function(e,z){var u=[],v="",x,s=z.nodeType?[z]:z;while((x=f.match.PSEUDO.exec(e))){v+=x[0];e=e.replace(f.match.PSEUDO,"")}e=f.relative[e]?e+"*":e;for(var y=0,r=s.length;y<r;y++){b(e,s[y],u)}return b.filter(v,u)};window.tinymce.dom.Sizzle=b})();(function(d){var f=d.each,c=d.DOM,b=d.isIE,e=d.isWebKit,a;d.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=c.get(n);k.push(h.add(n,p,l,j))});return k}m=c.get(m);if(!m){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&b){if(!n.target){n.target=n.srcElement}d.extend(n,h._stoppers)}if(!j){return l(n)}return l.call(j,n)};if(p=="unload"){d.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(n){n=c.get(n);j.push(h.remove(n,m,k))});return j}l=c.get(l);f(g,function(o,n){if(o.obj==l&&o.name==m&&(!k||(o.func==k||o.cfunc==k))){g.splice(n,1);h._remove(l,m,o.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=c.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});a=d.dom.Event=new d.dom.EventUtils();a._wait(window);d.addUnload(function(){a.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(c){function e(f){return f.replace(/[\n\r]+/g,"")}var b=c.is,a=c.isIE,d=c.each;c.create("tinymce.dom.Selection",{Selection:function(i,h,g){var f=this;f.dom=i;f.win=h;f.serializer=g;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){f[j]=new c.util.Dispatcher(f)});if(!f.win.getSelection){f.tridentSel=new c.dom.TridentSelection(f)}c.addUnload(f.destroy,f)},getContent:function(g){var f=this,h=f.getRng(),l=f.dom.create("body"),j=f.getSel(),i,k,m;g=g||{};i=k="";g.get=true;g.format=g.format||"html";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(j.toString?j.toString():""))}if(h.cloneContents){m=h.cloneContents();if(m){l.appendChild(m)}}else{if(b(h.item)||b(h.htmlText)){l.innerHTML=h.item?h.item(0).outerHTML:h.htmlText}else{l.innerHTML=h.toString()}}if(/^\s/.test(l.innerHTML)){i=" "}if(/\s+$/.test(l.innerHTML)){k=" "}g.getInner=true;g.content=f.isCollapsed()?"":i+f.serializer.serialize(l,g)+k;f.onGetContent.dispatch(f,g);return g.content},setContent:function(i,g){var f=this,j=f.getRng(),l,k=f.win.document;g=g||{format:"html"};g.set=true;i=g.content=f.dom.processHTML(i);f.onBeforeSetContent.dispatch(f,g);i=g.content;if(j.insertNode){i+='<span id="__caret">_</span>';j.deleteContents();j.insertNode(f.getRng().createContextualFragment(i));l=f.dom.get("__caret");j=k.createRange();j.setStartBefore(l);j.setEndBefore(l);f.setRng(j);f.dom.remove("__caret")}else{if(j.item){k.execCommand("Delete",false,null);j=f.getRng()}j.pasteHTML(i)}f.onSetContent.dispatch(f,g)},getStart:function(){var f=this,g=f.getRng(),h;if(a){if(g.item){return g.item(0)}g=g.duplicate();g.collapse(1);h=g.parentElement();if(h&&h.nodeName=="BODY"){return h.firstChild}return h}else{h=g.startContainer;if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[Math.min(h.childNodes.length-1,g.startOffset)]}if(h&&h.nodeType==3){return h.parentNode}return h}},getEnd:function(){var g=this,h=g.getRng(),i,f;if(a){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild}return i}else{i=h.endContainer;f=h.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[f>0?f-1:f]}if(i&&i.nodeType==3){return i.parentNode}return i}},getBookmark:function(p,q){var s=this,l=s.dom,f,i,h,m,g,n,o,k="\uFEFF",r;if(p==2){function j(){var v=s.getRng(true),u=l.getRoot(),x={};function y(z,B){var F=[],D,H,A=z[B?"startContainer":"endContainer"],E=z[B?"startOffset":"endOffset"],C,G={};if(A.nodeType==1&&A.hasChildNodes()){H=A.childNodes.length-1;G.exclude=(B&&E>H)||(!B&&E==0);if(!B&&E){E--}A=A.childNodes[E>H?H:E];if(A.nodeType==3){E=B?0:A.nodeValue.length}}if(A.nodeType==3){if(q){for(D=A.previousSibling;D&&D.nodeType==3;D=D.previousSibling){E+=D.nodeValue.length}}G.offset=E}for(;A&&A!=u;A=A.parentNode){F.push(s.dom.nodeIndex(A,q))}G.indexes=F;return G}x.start=y(v,true);if(!s.isCollapsed()){x.end=y(v)}return x}return j()}if(p){return{rng:s.getRng()}}f=s.getRng();h=l.uniqueId();m=tinyMCE.activeEditor.selection.isCollapsed();r="overflow:hidden;line-height:0px";if(f.duplicate||f.item){if(!f.item){i=f.duplicate();f.collapse();f.pasteHTML('<span _mce_type="bookmark" id="'+h+'_start" style="'+r+'">'+k+"</span>");if(!m){i.collapse(false);i.pasteHTML('<span _mce_type="bookmark" id="'+h+'_end" style="'+r+'">'+k+"</span>")}}else{n=f.item(0);g=n.nodeName;d(l.select(g),function(v,u){if(v==n){o=u}});return{name:g,index:o}}}else{i=f.cloneRange();if(!m){i.collapse(false);i.insertNode(l.create("span",{_mce_type:"bookmark",id:h+"_end",style:r},k))}f.collapse(true);f.insertNode(l.create("span",{_mce_type:"bookmark",id:h+"_start",style:r},k))}s.moveToBookmark({id:h,keep:1});return{id:h}},moveToBookmark:function(l){var n=this,k=n.dom,i,h,f,m;if(n.tridentSel){n.tridentSel.destroy()}if(l){if(l.start){f=k.createRng();m=k.getRoot();function g(s){var o=l[s?"start":"end"],p,q,r;if(o){for(q=m,p=o.indexes.length-1;p>=0;p--){q=q.childNodes[o.indexes[p]]}if(s){if(q.nodeType==3&&o.offset){f.setStart(q,o.offset)}else{if(o.exclude){f.setStartAfter(q)}else{f.setStartBefore(q)}}}else{if(q.nodeType==3&&o.offset){f.setEnd(q,o.offset)}else{if(o.exclude){f.setEndBefore(q)}else{f.setEndAfter(q)}}}}}g(true);g();n.setRng(f)}else{if(l.id){f=k.createRng();function j(v){var p=k.get(l.id+"_"+v),u,o,r,s,q=l.keep;if(p){u=p.parentNode;if(v=="start"){if(!q){o=k.nodeIndex(p);if(o>0){o++}}else{u=p;o=1}f.setStart(u,o);f.setEnd(u,o)}else{if(!q){o=k.nodeIndex(p)}else{u=p;o=1}f.setEnd(u,o)}if(!q){s=p.previousSibling;r=p.nextSibling;k.remove(p);if(s&&r&&s.nodeType==r.nodeType&&s.nodeType==3){o=s.nodeValue.length;s.appendData(r.nodeValue);k.remove(r);if(v=="start"){f.setStart(s,o);f.setEnd(s,o)}else{f.setEnd(s,o)}}}}}j("start");j("end");n.setRng(f)}else{if(l.name){n.select(k.select(l.name)[l.index])}else{if(l.rng){n.setRng(l.rng)}}}}}},select:function(k,j){var i=this,l=i.dom,g=l.createRng(),f;f=l.nodeIndex(k);g.setStart(k.parentNode,f);g.setEnd(k.parentNode,f+1);if(j){function h(m,o){var n=new c.dom.TreeWalker(m,m);do{if(m.nodeType==3&&c.trim(m.nodeValue).length!=0){if(o){g.setStart(m,0)}else{g.setEnd(m,m.nodeValue.length)}return}if(m.nodeName=="BR"){if(o){g.setStartBefore(m)}else{g.setEndBefore(m)}return}}while(m=(o?n.next():n.prev()))}h(k,1);h(k)}i.setRng(g);return k},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(f){var g=this,h=g.getRng(),i;if(h.item){i=h.item(0);h=this.win.document.body.createTextRange();h.moveToElementText(i)}h.collapse(!!f);g.setRng(h)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(j){var g=this,h,i;if(j&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){i=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():g.win.document.createRange())}}catch(f){}if(!i){i=a?g.win.document.body.createTextRange():g.win.document.createRange()}return i},setRng:function(i){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){h.removeAllRanges();h.addRange(i)}}else{if(i.cloneRange){g.tridentSel.addRange(i);return}try{i.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var g=this,f=g.getRng(),h=g.getSel(),i;if(!a){if(!f){return g.dom.getRoot()}i=f.commonAncestorContainer;if(!f.collapsed){if(f.startContainer==f.endContainer){if(f.startOffset-f.endOffset<2){if(f.startContainer.hasChildNodes()){i=f.startContainer.childNodes[f.startOffset]}}}if(c.isWebKit&&h.anchorNode&&h.anchorNode.nodeType==1){return h.anchorNode.childNodes[h.anchorOffset]}}if(i&&i.nodeType==3){return i.parentNode}return i}return f.item?f.item(0):f.parentElement()},getSelectedBlocks:function(g,f){var i=this,j=i.dom,m,h,l,k=[];m=j.getParent(g||i.getStart(),j.isBlock);h=j.getParent(f||i.getEnd(),j.isBlock);if(m){k.push(m)}if(m&&h&&m!=h){l=m;while((l=l.nextSibling)&&l!=h){if(j.isBlock(l)){k.push(l)}}}if(h&&m!=h){k.push(h)}return k},destroy:function(g){var f=this;f.win=null;if(f.tridentSel){f.tridentSel.destroy()}if(!g){c.removeUnload(f.destroy)}}})})(tinymce);(function(a){a.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(c){function b(){var e=document.implementation;if(!e||!e.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(d){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(d){}}else{return e.createDocument("","",null)}}this.doc=b();this.valid=a.isOpera||a.isWebKit;this.reset()},reset:function(){var b=this,c=b.doc;if(c.firstChild){c.removeChild(c.firstChild)}b.node=c.appendChild(c.createElement("html"))},writeStartElement:function(c){var b=this;b.node=b.node.appendChild(b.doc.createElement(c))},writeAttribute:function(c,b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.setAttribute(c,b)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var b=this,c=b.node;c.appendChild(b.doc.createTextNode(""));b.node=c.parentNode},writeText:function(b){if(this.valid){b=b.replace(/>/g,"%MCGT%")}this.node.appendChild(this.doc.createTextNode(b))},writeCDATA:function(b){this.node.appendChild(this.doc.createCDATASection(b))},writeComment:function(b){if(a.isIE){b=b.replace(/^\-|\-$/g," ")}this.node.appendChild(this.doc.createComment(b.replace(/\-\-/g," ")))},getContent:function(){var b;b=this.doc.xml||new XMLSerializer().serializeToString(this.doc);b=b.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");b=b.replace(/ ?\/>/g," />");if(this.valid){b=b.replace(/\%MCGT%/g,"&gt;")}return b}})})(tinymce);(function(a){a.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(b){this.settings=a.extend({indent_char:" ",indentation:0},b);this.reset()},reset:function(){this.indent="";this.str="";this.tags=[];this.count=0},writeStartElement:function(b){this._writeAttributesEnd();this.writeRaw("<"+b);this.tags.push(b);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(d,b){var c=this;c.writeRaw(" "+c.encode(d)+'="'+c.encode(b)+'"')},writeEndElement:function(){var b;if(this.tags.length>0){b=this.tags.pop();if(this._writeAttributesEnd(1)){this.writeRaw("</"+b+">")}if(this.settings.indentation>0){this.writeRaw("\n")}}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");if(this.settings.indentation>0){this.writeRaw("\n")}}},writeText:function(b){this._writeAttributesEnd();this.writeRaw(this.encode(b));this.count++},writeCDATA:function(b){this._writeAttributesEnd();this.writeRaw("<![CDATA["+b+"]]>");this.count++},writeComment:function(b){this._writeAttributesEnd();this.writeRaw("<!-- "+b+"-->");this.count++},writeRaw:function(b){this.str+=b},encode:function(b){return b.replace(/[<>&"]/g,function(c){switch(c){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}return c})},getContent:function(){return this.str},_writeAttributesEnd:function(b){if(!this.inAttr){return}this.inAttr=false;if(b&&this.elementCount==this.count){this.writeRaw(" />");return false}this.writeRaw(">");return true}})})(tinymce);(function(e){var g=e.extend,f=e.each,b=e.util.Dispatcher,d=e.isIE,a=e.isGecko;function c(h){return h.replace(/([?+*])/g,".$1")}e.create("tinymce.dom.Serializer",{Serializer:function(j){var i=this;i.key=0;i.onPreProcess=new b(i);i.onPostProcess=new b(i);try{i.writer=new e.dom.XMLWriter()}catch(h){i.writer=new e.dom.StringWriter()}i.settings=j=g({dom:e.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},j);i.dom=j.dom;i.schema=j.schema;if(j.entity_encoding=="named"&&!j.entities){j.entity_encoding="raw"}if(j.remove_redundant_brs){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(n,m,o){if(/^<br \/>\s*<\//.test(n)){return"</"+o+">"}return n})})}if(j.element_format=="html"){i.onPostProcess.add(function(k,l){l.content=l.content.replace(/<([^>]+) \/>/g,"<$1>")})}if(j.fix_list_elements){i.onPreProcess.add(function(y,s){var l,A,z=["ol","ul"],v,u,q,k=/^(OL|UL)$/,B;function m(r,x){var o=x.split(","),p;while((r=r.previousSibling)!=null){for(p=0;p<o.length;p++){if(r.nodeName==o[p]){return r}}}return null}for(A=0;A<z.length;A++){l=i.dom.select(z[A],s.node);for(v=0;v<l.length;v++){u=l[v];q=u.parentNode;if(k.test(q.nodeName)){B=m(u,"LI");if(!B){B=i.dom.create("li");B.innerHTML="&nbsp;";B.appendChild(u);q.insertBefore(B,q.firstChild)}else{B.appendChild(u)}}}}})}if(j.fix_table_elements){i.onPreProcess.add(function(k,l){if(!e.isOpera||opera.buildNumber()>=1767){f(i.dom.select("p table",l.node).reverse(),function(p){var o=i.dom.getParent(p.parentNode,"table,p");if(o.nodeName!="TABLE"){try{i.dom.split(o,p)}catch(m){}}})}})}},setEntities:function(o){var n=this,j,m,h={},k;if(n.entityLookup){return}j=o.split(",");for(m=0;m<j.length;m+=2){k=j[m];if(k==34||k==38||k==60||k==62){continue}h[String.fromCharCode(j[m])]=j[m+1];k=parseInt(j[m]).toString(16)}n.entityLookup=h},setRules:function(i){var h=this;h._setup();h.rules={};h.wildRules=[];h.validElements={};return h.addRules(i)},addRules:function(i){var h=this,j;if(!i){return}h._setup();f(i.split(","),function(m){var q=m.split(/\[|\]/),l=q[0].split("/"),r,k,o,n=[];if(j){k=e.extend([],j.attribs)}if(q.length>1){f(q[1].split("|"),function(v){var p={},u;k=k||[];v=v.replace(/::/g,"~");v=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(v);v[2]=v[2].replace(/~/g,":");if(v[1]=="!"){r=r||[];r.push(v[2])}if(v[1]=="-"){for(u=0;u<k.length;u++){if(k[u].name==v[2]){k.splice(u,1);return}}}switch(v[3]){case"=":p.defaultVal=v[4]||"";break;case":":p.forcedVal=v[4];break;case"<":p.validVals=v[4].split("?");break}if(/[*.?]/.test(v[2])){o=o||[];p.nameRE=new RegExp("^"+c(v[2])+"$");o.push(p)}else{p.name=v[2];k.push(p)}n.push(v[2])})}f(l,function(y,v){var z=y.charAt(0),u=1,p={};if(j){if(j.noEmpty){p.noEmpty=j.noEmpty}if(j.fullEnd){p.fullEnd=j.fullEnd}if(j.padd){p.padd=j.padd}}switch(z){case"-":p.noEmpty=true;break;case"+":p.fullEnd=true;break;case"#":p.padd=true;break;default:u=0}l[v]=y=y.substring(u);h.validElements[y]=1;if(/[*.?]/.test(l[0])){p.nameRE=new RegExp("^"+c(l[0])+"$");h.wildRules=h.wildRules||{};h.wildRules.push(p)}else{p.name=l[0];if(l[0]=="@"){j=p}h.rules[y]=p}p.attribs=k;if(r){p.requiredAttribs=r}if(o){y="";f(n,function(s){if(y){y+="|"}y+="("+c(s)+")"});p.validAttribsRE=new RegExp("^"+y.toLowerCase()+"$");p.wildAttribs=o}})});i="";f(h.validElements,function(m,l){if(i){i+="|"}if(l!="@"){i+=l}});h.validElementsRE=new RegExp("^("+c(i.toLowerCase())+")$")},findRule:function(m){var j=this,l=j.rules,h,k;j._setup();k=l[m];if(k){return k}l=j.wildRules;for(h=0;h<l.length;h++){if(l[h].nameRE.test(m)){return l[h]}}return null},findAttribRule:function(h,l){var j,k=h.wildAttribs;for(j=0;j<k.length;j++){if(k[j].nameRE.test(l)){return k[j]}}return null},serialize:function(r,q){var m,k=this,p,i,j,l;k._setup();q=q||{};q.format=q.format||"html";k.processObj=q;if(d){l=[];f(r.getElementsByTagName("option"),function(o){var h=k.dom.getAttrib(o,"selected");l.push(h?h:null)})}r=r.cloneNode(true);if(d){f(r.getElementsByTagName("option"),function(o,h){k.dom.setAttrib(o,"selected",l[h])})}j=r.ownerDocument.implementation;if(j.createHTMLDocument&&(e.isOpera&&opera.buildNumber()>=1767)){p=j.createHTMLDocument("");f(r.nodeName=="BODY"?r.childNodes:[r],function(h){p.body.appendChild(p.importNode(h,true))});if(r.nodeName!="BODY"){r=p.body.firstChild}else{r=p.body}i=k.dom.doc;k.dom.doc=p}k.key=""+(parseInt(k.key)+1);if(!q.no_events){q.node=r;k.onPreProcess.dispatch(k,q)}k.writer.reset();k._info=q;k._serializeNode(r,q.getInner);q.content=k.writer.getContent();if(i){k.dom.doc=i}if(!q.no_events){k.onPostProcess.dispatch(k,q)}k._postProcess(q);q.node=null;return e.trim(q.content)},_postProcess:function(n){var i=this,k=i.settings,j=n.content,m=[],l;if(n.format=="html"){l=i._protect({content:j,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]-->)/g}]});j=l.content;if(k.entity_encoding!=="raw"){j=i._encode(j)}if(!n.set){j=j.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,k.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(k.remove_linebreaks){j=j.replace(/\r?\n|\r/g," ");j=j.replace(/(<[^>]+>)\s+/g,"$1 ");j=j.replace(/\s+(<\/[^>]+>)/g," $1");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,"<$1 $2>");j=j.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");j=j.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(k.apply_source_formatting&&k.indent_mode=="simple"){j=j.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");j=j.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,"\n<$1$2>");j=j.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");j=j.replace(/\n\n/g,"\n")}}j=i._unprotect(j,l);j=j.replace(/<!--\[CDATA\[([\s\S]+)\]\]-->/g,"<![CDATA[$1]]>");if(k.entity_encoding=="raw"){j=j.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>")}j=j.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(h,p,o){return"<noscript"+p+">"+i.dom.decode(o.replace(/<!--|-->/g,""))+"</noscript>"})}n.content=j},_serializeNode:function(D,I){var z=this,A=z.settings,x=z.writer,q,j,u,F,E,H,B,h,y,k,r,C,p,m,G,o;if(!A.node_filter||A.node_filter(D)){switch(D.nodeType){case 1:if(D.hasAttribute?D.hasAttribute("_mce_bogus"):D.getAttribute("_mce_bogus")){return}p=G=false;q=D.hasChildNodes();k=D.getAttribute("_mce_name")||D.nodeName.toLowerCase();o=D.getAttribute("_mce_type");if(o){if(!z._info.cleanup){p=true;return}else{G=1}}if(d){if(D.scopeName!=="HTML"&&D.scopeName!=="html"){k=D.scopeName+":"+k}}if(k.indexOf("mce:")===0){k=k.substring(4)}if(!G){if(!z.validElementsRE||!z.validElementsRE.test(k)||(z.invalidElementsRE&&z.invalidElementsRE.test(k))||I){p=true;break}}if(d){if(A.fix_content_duplication){if(D._mce_serialized==z.key){return}D._mce_serialized=z.key}if(k.charAt(0)=="/"){k=k.substring(1)}}else{if(a){if(D.nodeName==="BR"&&D.getAttribute("type")=="_moz"){return}}}if(A.validate_children){if(z.elementName&&!z.schema.isValid(z.elementName,k)){p=true;break}z.elementName=k}r=z.findRule(k);k=r.name||k;m=A.closed.test(k);if((!q&&r.noEmpty)||(d&&!k)){p=true;break}if(r.requiredAttribs){H=r.requiredAttribs;for(F=H.length-1;F>=0;F--){if(this.dom.getAttrib(D,H[F])!==""){break}}if(F==-1){p=true;break}}x.writeStartElement(k);if(r.attribs){for(F=0,B=r.attribs,E=B.length;F<E;F++){H=B[F];y=z._getAttrib(D,H);if(y!==null){x.writeAttribute(H.name,y)}}}if(r.validAttribsRE){B=z.dom.getAttribs(D);for(F=B.length-1;F>-1;F--){h=B[F];if(h.specified){H=h.nodeName.toLowerCase();if(A.invalid_attrs.test(H)||!r.validAttribsRE.test(H)){continue}C=z.findAttribRule(r,H);y=z._getAttrib(D,C,H);if(y!==null){x.writeAttribute(H,y)}}}}if(o&&G){x.writeAttribute("_mce_type",o)}if(k==="script"&&e.trim(D.innerHTML)){x.writeText("// ");x.writeCDATA(D.innerHTML.replace(/<!--|-->|<\[CDATA\[|\]\]>/g,""));q=false;break}if(r.padd){if(q&&(u=D.firstChild)&&u.nodeType===1&&D.childNodes.length===1){if(u.hasAttribute?u.hasAttribute("_mce_bogus"):u.getAttribute("_mce_bogus")){x.writeText("\u00a0")}}else{if(!q){x.writeText("\u00a0")}}}break;case 3:if(A.validate_children&&z.elementName&&!z.schema.isValid(z.elementName,"#text")){return}return x.writeText(D.nodeValue);case 4:return x.writeCDATA(D.nodeValue);case 8:return x.writeComment(D.nodeValue)}}else{if(D.nodeType==1){q=D.hasChildNodes()}}if(q&&!m){u=D.firstChild;while(u){z._serializeNode(u);z.elementName=k;u=u.nextSibling}}if(!p){if(!m){x.writeFullEndElement()}else{x.writeEndElement()}}},_protect:function(j){var i=this;j.items=j.items||[];function h(l){return l.replace(/[\r\n\\]/g,function(m){if(m==="\n"){return"\\n"}else{if(m==="\\"){return"\\\\"}}return"\\r"})}function k(l){return l.replace(/\\[\\rn]/g,function(m){if(m==="\\n"){return"\n"}else{if(m==="\\\\"){return"\\"}}return"\r"})}f(j.patterns,function(l){j.content=k(h(j.content).replace(l.pattern,function(n,o,m,p){m=k(m);if(l.encode){m=i._encode(m)}j.items.push(m);return o+"<!--mce:"+(j.items.length-1)+"-->"+p}))});return j},_unprotect:function(i,j){i=i.replace(/\<!--mce:([0-9]+)--\>/g,function(k,h){return j.items[parseInt(h)]});j.items=[];return i},_encode:function(m){var j=this,k=j.settings,i;if(k.entity_encoding!=="raw"){if(k.entity_encoding.indexOf("named")!=-1){j.setEntities(k.entities);i=j.entityLookup;m=m.replace(/[\u007E-\uFFFF]/g,function(h){var l;if(l=i[h]){h="&"+l+";"}return h})}if(k.entity_encoding.indexOf("numeric")!=-1){m=m.replace(/[\u007E-\uFFFF]/g,function(h){return"&#"+h.charCodeAt(0)+";"})}}return m},_setup:function(){var h=this,i=this.settings;if(h.done){return}h.done=1;h.setRules(i.valid_elements);h.addRules(i.extended_valid_elements);if(i.invalid_elements){h.invalidElementsRE=new RegExp("^("+c(i.invalid_elements.replace(/,/g,"|").toLowerCase())+")$")}if(i.attrib_value_filter){h.attribValueFilter=i.attribValueFilter}},_getAttrib:function(m,j,h){var l,k;h=h||j.name;if(j.forcedVal&&(k=j.forcedVal)){if(k==="{$uid}"){return this.dom.uniqueId()}return k}k=this.dom.getAttrib(m,h);switch(h){case"rowspan":case"colspan":if(k=="1"){k=""}break}if(this.attribValueFilter){k=this.attribValueFilter(h,k,m)}if(j.validVals){for(l=j.validVals.length-1;l>=0;l--){if(k==j.validVals[l]){break}}if(l==-1){return null}}if(k===""&&typeof(j.defaultVal)!="undefined"){k=j.defaultVal;if(k==="{$uid}"){return this.dom.uniqueId()}return k}else{if(h=="class"&&this.processObj.get){k=k.replace(/\s?mceItem\w+\s?/g,"")}}if(k===""){return null}return k}})})(tinymce);(function(a){a.dom.ScriptLoader=function(h){var c=0,k=1,i=2,l={},j=[],f={},d=[],g=0,e;function b(m,u){var v=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}u()}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var x=q.create("script",{type:"text/javascript"});x.text=y;document.getElementsByTagName("head")[0].appendChild(x);q.remove(x);p()}});return}}s=q.create("script",{id:n,type:"text/javascript",src:a._addVer(m)});s.onload=p;s.onreadystatechange=function(){var x=s.readyState;if(x=="complete"||x=="loaded"){p()}};(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==i};this.markDone=function(m){l[m]=i};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==e){j.push(m);l[m]=c}if(q){if(!f[m]){f[m]=[]}f[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(j,n,m)};this.loadScripts=function(m,q,p){function n(r){a.each(f[r],function(s){s.func.call(s.scope)});f[r]=e}d.push({func:q,scope:p||this});(function o(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==i){n(s);return}if(l[s]!=k){l[s]=k;g++;b(s,function(){l[s]=i;g--;n(s);o()})}});if(!g){a.each(d,function(s){s.func.call(s.scope)});d.length=0}})()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(a,c){var b=a;function d(i,f,e,j){var h,g;if(i){if(!j&&i[f]){return i[f]}if(i!=c){h=i[e];if(h){return h}for(g=i.parentNode;g&&g!=c;g=g.parentNode){h=g[e];if(h){return h}}}}}this.current=function(){return b};this.next=function(e){return(b=d(b,"firstChild","nextSibling",e))};this.prev=function(e){return(b=d(b,"lastChild","lastSibling",e))}};(function(){var a={};function b(f,e){var d;function c(g){return g.replace(/[A-Z]+/g,function(h){return c(f[h])})}for(d in f){if(f.hasOwnProperty(d)){f[d]=c(f[d])}}c(e).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(l,g,j){var h,k={};j=j.split(/\|/);for(h=j.length-1;h>=0;h--){k[j[h]]=1}a[g]=k})}b({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");tinymce.dom.Schema=function(){var c=this,d=a;c.isValid=function(f,e){var g=d[f];return !!(g&&(!e||g[e]))}}})();(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,r){var h=d.startContainer,k=d.startOffset,s=d.endContainer,l=d.endOffset,i,f,n,g,q,p,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(u){r([u])});return}function o(x,v,u){var y=[];for(;x&&x!=u;x=x[v]){y.push(x)}return y}function m(v,u){do{if(v.parentNode==u){return v}v=v.parentNode}while(v)}function j(x,v,y){var u=y?"nextSibling":"previousSibling";for(g=x,q=g.parentNode;g&&g!=v;g=q){q=g.parentNode;p=o(g==x?g:g[u],u);if(p.length){if(!y){p.reverse()}r(p)}}}if(h.nodeType==1&&h.hasChildNodes()){h=h.childNodes[k]}if(s.nodeType==1&&s.hasChildNodes()){s=s.childNodes[Math.min(k==l?l:l-1,s.childNodes.length-1)]}i=c.findCommonAncestor(h,s);if(h==s){return r([h])}for(g=h;g;g=g.parentNode){if(g==s){return j(h,i,true)}if(g==i){break}}for(g=s;g;g=g.parentNode){if(g==h){return j(s,i)}if(g==i){break}}f=m(h,i)||h;n=m(s,i)||s;j(h,f,true);p=o(f==h?f:f.nextSibling,"nextSibling",n==s?n.nextSibling:n);if(p.length){r(p)}j(s,n)}}})(tinymce);(function(c){var b=c.DOM,a=c.is;c.create("tinymce.ui.Control",{Control:function(e,d){this.id=e;this.settings=d=d||{};this.rendered=false;this.onRender=new c.util.Dispatcher(this);this.classPrefix="";this.scope=d.scope||this;this.disabled=0;this.active=0},setDisabled:function(d){var f;if(d!=this.disabled){f=b.get(this.id);if(f&&this.settings.unavailable_prefix){if(d){this.prevTitle=f.title;f.title=this.settings.unavailable_prefix+": "+f.title}else{f.title=this.prevTitle}}this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d}},isActive:function(){return this.active},setState:function(f,d){var e=b.get(this.id);f=this.classPrefix+f;if(d){b.addClass(e,f)}else{b.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){b.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(a(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(a(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){b.remove(this.id);this.destroy()},destroy:function(){c.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(b,a){this.parent(b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(c(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(d){var c=d.is,b=d.DOM,e=d.each,a=d.walk;d.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new d.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new d.ui.MenuItem(f.id||b.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new d.ui.Menu(g.id||b.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(e){var d=e.is,c=e.DOM,f=e.each,a=e.dom.Event,b=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||c.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(d(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;g=new e.ui.DropMenu(j.id||c.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},update:function(){var i=this,j=i.settings,g=c.get("menu_"+i.id+"_tbl"),l=c.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!c.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){c.setStyle(l,"width",h)}if(j.max_height){c.setStyle(l,"height",k);if(g.clientHeight<j.max_height){c.setStyle(l,"overflow","hidden")}}},showMenu:function(p,n,r){var z=this,A=z.settings,o,g=c.getViewPort(),u,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){o=c.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new b("menu_"+z.id,{blocker:1,container:A.container})}else{o=c.get("menu_"+z.id)}if(!e.isOpera){c.setStyles(o,{left:-65535,top:-65535})}c.show(o);z.update();p+=A.offset_x||0;n+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){u=o.clientWidth-i;l=o.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+u)>v){p=r?r-u:Math.max(0,(v-A.vp_offset_x)-u)}if((n+A.vp_offset_y+l)>q){n=Math.max(0,(q-A.vp_offset_y)-l)}}c.setStyles(o,{left:p,top:n});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(o,"click",function(s){var h;s=s.target;if(s&&(s=c.getParent(s,"tr"))&&!c.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(z.hasMenus()){z.mouseOverFunc=a.add(o,"mouseover",function(y){var h,x,s;y=y.target;if(y&&(y=c.getParent(y,"tr"))){h=z.items[y.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(y&&c.hasClass(y,m+"ItemSub")){x=c.getRect(y);h.showMenu((x.x+x.w-i),x.y-i,x.x);z.lastMenu=h;c.addClass(c.get(h.id).firstChild,m+"ItemActive")}}})}z.onShowMenu.dispatch(z);if(A.keyboard_focus){a.add(o,"keydown",z._keyHandler,z);c.select("a","menu_"+z.id)[0].focus();z._focusIdx=0}},hideMenu:function(j){var g=this,i=c.get("menu_"+g.id),h;if(!g.isMenuVisible){return}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);c.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=c.get(g.id)){c.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=c.get("menu_"+g.id))){g._add(c.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){c.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=c.get("menu_"+g.id);a.remove(h,"mouseover",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);if(g.element){g.element.remove()}c.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;g=c.create("div",{id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000"});k=c.add(g,"div",{id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new b("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){c.add(k,"span",{"class":i.classPrefix+"Line"})}l=c.add(k,"table",{id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=c.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_keyHandler:function(j){var i=this,h=j.keyCode;function g(m){var k=i._focusIdx+m,l=c.select("a","menu_"+i.id)[k];if(l){i._focusIdx=k;l.focus()}}switch(h){case 38:g(-1);return;case 40:g(1);return;case 13:return;case 27:return this.hideMenu()}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=c.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});c.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){c.addClass(i,"mceLast")}return}i=l=c.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=c.add(i,"td");i=p=c.add(i,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});c.addClass(k,q["class"]);g=c.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){c.add(g,"img",{src:q.icon_src})}i=c.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){c.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){c.addClass(l,"mceFirst")}if((i=l.previousSibling)&&c.hasClass(i,m+"ItemSeparator")){c.addClass(l,"mceFirst")}if(h.collapse){c.addClass(l,m+"ItemSub")}if(i=l.previousSibling){c.removeClass(i,"mceLast")}c.addClass(l,"mceLast")}})})(tinymce);(function(b){var a=b.DOM;b.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(d,c){this.parent(d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=a.encode(e.label||"");d='<a id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+a.encode(e.title)+'">';if(e.image){d+='<img class="mceIcon" src="'+e.image+'" />'+c+"</a>"}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")+"</a>"}return d},postRender:function(){var c=this,d=c.settings;b.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(h,g){var f=this;f.parent(h,g);f.items=[];f.onChange=new a(f);f.onPostRender=new a(f);f.onAdd=new a(f);f.onRenderMenu=new d.util.Dispatcher(this);f.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var g=this,h,i;if(f!=g.selectedIndex){h=c.get(g.id+"_text");i=g.items[f];if(i){g.selectedValue=i.value;g.selectedIndex=f;c.setHTML(h,c.encode(i.title));c.removeClass(h,"mceTitle")}else{c.setHTML(h,c.encode(g.settings.title));c.addClass(h,"mceTitle");g.selectedValue=g.selectedIndex=null}h=0}},add:function(i,f,h){var g=this;h=h||{};h=d.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<table id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';i+="<td>"+c.createHTML("a",{id:f.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},c.encode(f.settings.title))+"</td>";i+="<td>"+c.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";i+="</tr></tbody></table>";return i},showMenu:function(){var g=this,j,i,h=c.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}j=c.getPos(this.settings.menu_container);i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!d.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(k){if(k.value===g.selectedValue){f.items[k.id].setSelected(1);g.oldID=k.id}});f.showMenu(0,h.clientHeight);b.add(c.doc,"mousedown",g.hideMenu,g);c.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!c.getParent(g.target,".mceMenu")){c.removeClass(f.id,f.classPrefix+"Selected");b.remove(c.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(g.hideMenu,g);f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=c.uniqueId();h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id+"_text","focus",function(h){if(!f._focused){f.keyDownHandler=b.add(f.id+"_text","keydown",function(l){var i=-1,j,k=l.keyCode;e(f.items,function(m,n){if(f.selectedValue==m.value){i=n}});if(k==38){j=f.items[i-1]}else{if(k==40){j=f.items[i+1]}else{if(k==13){j=f.selectedValue;f.selectedValue=null;f.settings.onselect(j);return b.cancel(l)}}}if(j){f.hideMenu();f.select(j.value)}})}f._focused=1});b.add(f.id+"_text","blur",function(){b.remove(f.id+"_text","keydown",f.keyDownHandler);f._focused=0});if(d.isIE6||!c.boxModel){b.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,g+"Disabled")){c.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,g+"Disabled")){c.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,c.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,b=d.dom.Event,e=d.each,a=d.util.Dispatcher;d.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){c.get(this.id).disabled=f},isDisabled:function(){return c.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){c.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){c.add(c.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return c.get(this.id).options.length-1},renderHTML:function(){var g,f=this;g=c.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=c.createHTML("option",{value:h.value},h.title)});g=c.createHTML("select",{id:f.id,"class":"mceNativeListBox"},g);return g},postRender:function(){var g=this,h;g.rendered=true;function f(j){var i=g.items[j.target.selectedIndex-1];if(i&&(i=i.value)){g.onChange.dispatch(g,i);if(g.settings.onselect){g.settings.onselect(i)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(j){var i;b.remove(g.id,"change",h);i=b.add(g.id,"blur",function(){b.add(g.id,"change",f);b.remove(g.id,"blur",i)});if(j.keyCode==13||j.keyCode==32){f(j);return b.cancel(j)}});g.onPostRender.dispatch(g,c.get(g.id))}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(f,e){this.parent(f,e);this.onRenderMenu=new c.util.Dispatcher(this);e.menu_container=e.menu_container||b.doc.body},showMenu:function(){var g=this,j,i,h=b.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=b.getPos(g.settings.menu_container);i=b.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(b.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(f.hideMenu,f);f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&b.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!b.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(b.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each;c.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(f,e){this.parent(f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=b.createHTML("img ",{src:g.image,"class":"mceAction "+g["class"]})}else{e=b.createHTML("span",{"class":"mceAction "+g["class"]},"")}i+="<td>"+b.createHTML("a",{id:f.id+"_action",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=b.createHTML("span",{"class":"mceOpen "+g["class"]});i+="<td>"+b.createHTML("a",{id:f.id+"_open",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";return b.createHTML("table",{id:f.id,"class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:g.title},i)},postRender:function(){var e=this,f=e.settings;if(f.onclick){a.add(e.id+"_action","click",function(){if(!e.isDisabled()){f.onclick(e.value)}})}a.add(e.id+"_open","click",e.showMenu,e);a.add(e.id+"_open","focus",function(){e._focused=1});a.add(e.id+"_open","blur",function(){e._focused=0});if(c.isIE6||!b.boxModel){a.add(e.id,"mouseover",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.addClass(e.id,"mceSplitButtonHover")}});a.add(e.id,"mouseout",function(){if(!b.hasClass(e.id,"mceSplitButtonDisabled")){b.removeClass(e.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open")}})})(tinymce);(function(d){var c=d.DOM,a=d.dom.Event,b=d.is,e=d.each;d.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(h,g){var f=this;f.parent(h,g);f.settings=g=d.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},f.settings);f.onShowMenu=new d.util.Dispatcher(f);f.onHideMenu=new d.util.Dispatcher(f);f.value=g.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=c.get(f.id);c.show(f.id+"_menu");c.addClass(i,"mceSplitButtonSelected");h=c.getPos(i);c.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(c.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});c.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceSplitButtonMenu")){c.removeClass(f.id,"mceSplitButtonSelected");a.remove(c.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);c.hide(f.id+"_menu")}f.onHideMenu.dispatch(f);f.isMenuVisible=0},renderMenu:function(){var k=this,f,j=0,l=k.settings,p,h,o,g;g=c.add(l.menu_container,"div",{id:k.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"});f=c.add(g,"div",{"class":l["class"]+" mceSplitButtonMenu"});c.add(f,"span",{"class":"mceMenuLine"});p=c.add(f,"table",{"class":"mceColorSplitMenu"});h=c.add(p,"tbody");j=0;e(b(l.colors,"array")?l.colors:l.colors.split(","),function(i){i=i.replace(/^#/,"");if(!j--){o=c.add(h,"tr");j=l.grid_width-1}p=c.add(o,"td");p=c.add(p,"a",{href:"javascript:;",style:{backgroundColor:"#"+i},_mce_color:"#"+i})});if(l.more_colors_func){p=c.add(h,"tr");p=c.add(p,"td",{colspan:l.grid_width,"class":"mceMoreColors"});p=c.add(p,"a",{id:k.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title);a.add(p,"click",function(i){l.more_colors_func.call(l.more_colors_scope||this);return a.cancel(i)})}c.addClass(f,"mceColorSplitMenu");a.add(k.id+"_menu","click",function(i){var m;i=i.target;if(i.nodeName=="A"&&(m=i.getAttribute("_mce_color"))){k.setColor(m)}return a.cancel(i)});return g},setColor:function(g){var f=this;c.setStyle(f.id+"_preview","backgroundColor",g);f.value=g;f.hideMenu();f.settings.onselect(g)},postRender:function(){var f=this,g=f.id;f.parent();c.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});c.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");c.remove(this.id+"_menu")}})})(tinymce);tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var l=this,e="",g,j,b=tinymce.DOM,m=l.settings,d,a,f,k;k=l.controls;for(d=0;d<k.length;d++){j=k[d];a=k[d-1];f=k[d+1];if(d===0){g="mceToolbarStart";if(j.Button){g+=" mceToolbarStartButton"}else{if(j.SplitButton){g+=" mceToolbarStartSplitButton"}else{if(j.ListBox){g+=" mceToolbarStartListBox"}}}e+=b.createHTML("td",{"class":g},b.createHTML("span",null,"<!-- IE -->"))}if(a&&j.ListBox){if(a.Button||a.SplitButton){e+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))}}if(b.stdMode){e+='<td style="position: relative">'+j.renderHTML()+"</td>"}else{e+="<td>"+j.renderHTML()+"</td>"}if(f&&j.ListBox){if(f.Button||f.SplitButton){e+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->"))}}}g="mceToolbarEnd";if(j.Button){g+=" mceToolbarEndButton"}else{if(j.SplitButton){g+=" mceToolbarEndSplitButton"}else{if(j.ListBox){g+=" mceToolbarEndListBox"}}}e+=b.createHTML("td",{"class":g},b.createHTML("span",null,"<!-- IE -->"));return b.createHTML("table",{id:l.id,"class":"mceToolbar"+(m["class"]?" "+m["class"]:""),cellpadding:"0",cellspacing:"0",align:l.settings.align||""},"<tbody><tr>"+e+"</tr></tbody>")}});(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new a(this),get:function(d){return this.lookup[d]},requireLangPack:function(e){var d=b.EditorManager.settings;if(d&&d.language){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(e,d){this.items.push(d);this.lookup[e]=d;this.onAdd.dispatch(this,e,d);return d},load:function(h,e,d,g){var f=this;if(f.urls[h]){return}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}f.urls[h]=e.substring(0,e.lastIndexOf("/"));b.ScriptLoader.add(e,d,g)}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(f){var g=f.each,h=f.extend,e=f.DOM,a=f.dom.Event,c=f.ThemeManager,b=f.PluginManager,d=f.explode;f.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(f.documentBaseURL)){f.documentBaseURL+="/"}f.baseURL=new f.util.URI(f.documentBaseURL).toAbsolute(f.baseURL);f.baseURI=new f.util.URI(f.baseURL);f.onBeforeUnload=new f.util.Dispatcher(f);a.add(window,"beforeunload",function(i){f.onBeforeUnload.dispatch(t,i)});f.EditorManager=h(f,{editors:{},i18n:{},activeEditor:null,init:function(q){var p=this,l,k=f.ScriptLoader,o,n,i=[],m;function j(v,x,r){var u=v[x];if(!u){return}if(f.is(u,"string")){r=u.replace(/\.\w+$/,"");r=r?f.resolve(r):0;u=f.resolve(u)}return u.apply(r||this,Array.prototype.slice.call(arguments,2))}q=h({theme:"simple",language:"en"},q);p.settings=q;a.add(document,"init",function(){var r,u;j(q,"onpageload");switch(q.mode){case"exact":r=q.elements||"";if(r.length>0){g(d(r),function(x){if(e.get(x)){m=new f.Editor(x,q);i.push(m);m.render(1)}else{o=0;g(document.forms,function(v){g(v.elements,function(y){if(y.name===x){x="mce_editor_"+o;e.setAttrib(y,"id",x);m=new f.Editor(x,q);i.push(m);m.render(1)}})})}})}break;case"textareas":case"specific_textareas":function s(x,v){return v.constructor===RegExp?v.test(x.className):e.hasClass(x,v)}g(e.select("textarea"),function(x){if(q.editor_deselector&&s(x,q.editor_deselector)){return}if(!q.editor_selector||s(x,q.editor_selector)){n=e.get(x.name);if(!x.id&&!n){x.id=x.name}if(!x.id||p.get(x.id)){x.id=e.uniqueId()}m=new f.Editor(x.id,q);i.push(m);m.render(1)}});break}if(q.oninit){r=u=0;g(i,function(v){u++;if(!v.initialized){v.onInit.add(function(){r++;if(r==u){j(q,"oninit")}})}else{r++}if(r==u){j(q,"oninit")}})}})},get:function(i){return this.editors[i]},getInstanceById:function(i){return this.get(i)},add:function(i){this.editors[i.id]=i;this._setActive(i);return i},remove:function(j){var i=this;if(!i.editors[j.id]){return null}delete i.editors[j.id];if(i.activeEditor==j){i._setActive(null);g(i.editors,function(k){i._setActive(k);return false})}j.destroy();return j},execCommand:function(o,m,l){var n=this,k=n.get(l),i;switch(o){case"mceFocus":k.focus();return true;case"mceAddEditor":case"mceAddControl":if(!n.get(l)){new f.Editor(l,n.settings).render()}return true;case"mceAddFrameControl":i=l.window;i.tinyMCE=tinyMCE;i.tinymce=f;f.DOM.doc=i.document;f.DOM.win=i;k=new f.Editor(l.element_id,l);k.render();if(f.isIE){function j(){k.destroy();i.detachEvent("onunload",j);i=i.tinyMCE=i.tinymce=null}i.attachEvent("onunload",j)}l.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(k){k.remove()}return true;case"mceToggleEditor":if(!k){n.execCommand("mceAddControl",0,l);return true}if(k.isHidden()){k.show()}else{k.hide()}return true}if(n.activeEditor){return n.activeEditor.execCommand(o,m,l)}return false},execInstanceCommand:function(m,l,k,j){var i=this.get(m);if(i){return i.execCommand(l,k,j)}return false},triggerSave:function(){g(this.editors,function(i){i.save()})},addI18n:function(k,l){var i,j=this.i18n;if(!f.is(k,"string")){g(k,function(n,m){g(n,function(q,p){g(q,function(s,r){if(p==="common"){j[m+"."+r]=s}else{j[m+"."+p+"."+r]=s}})})})}else{g(l,function(n,m){j[k+"."+m]=n})}},_setActive:function(i){this.selectedInstance=this.activeEditor=i}})})(tinymce);(function(n){var o=n.DOM,k=n.dom.Event,f=n.extend,l=n.util.Dispatcher,j=n.each,a=n.isGecko,b=n.isIE,e=n.isWebKit,d=n.is,h=n.ThemeManager,c=n.PluginManager,i=n.EditorManager,p=n.inArray,m=n.grep,g=n.explode;n.create("tinymce.Editor",{Editor:function(u,r){var q=this;q.id=q.editorId=u;q.execCommands={};q.queryStateCommands={};q.queryValueCommands={};q.isNotDirty=false;q.plugins={};j(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){q[s]=new l(q)});q.settings=r=f({id:u,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:n.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1},r);q.documentBaseURI=new n.util.URI(r.document_base_url||n.documentBaseURL,{base_uri:tinyMCE.baseURI});q.baseURI=i.baseURI;q.execCallback("setup",q)},render:function(u){var v=this,x=v.settings,y=v.id,q=n.ScriptLoader;if(!k.domLoaded){k.add(document,"init",function(){v.render()});return}tinyMCE.settings=x;if(!v.getElement()){return}if(x.strict_loading_mode){q.settings.strict_mode=x.strict_loading_mode;n.DOM.settings.strict=1}if(!/TEXTAREA|INPUT/i.test(v.getElement().nodeName)&&x.hidden_input&&o.getParent(y,"form")){o.insertAfter(o.create("input",{type:"hidden",name:y}),y)}if(n.WindowManager){v.windowManager=new n.WindowManager(v)}if(x.encoding=="xml"){v.onGetContent.add(function(s,z){if(z.save){z.content=o.encode(z.content)}})}if(x.add_form_submit_trigger){v.onSubmit.addToTop(function(){if(v.initialized){v.save();v.isNotDirty=1}})}if(x.add_unload_trigger){v._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(v.initialized&&!v.destroyed&&!v.isHidden()){v.save({format:"raw",no_events:true})}})}n.addUnload(v.destroy,v);if(x.submit_patch){v.onBeforeRenderUI.add(function(){var s=v.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){v.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){i.triggerSave();v.isNotDirty=1;return v.formElement._mceOldSubmit(v.formElement)}}s=null})}function r(){if(x.language){q.add(n.baseURL+"/langs/"+x.language+".js")}if(x.theme&&x.theme.charAt(0)!="-"&&!h.urls[x.theme]){h.load(x.theme,"themes/"+x.theme+"/editor_template"+n.suffix+".js")}j(g(x.plugins),function(s){if(s&&s.charAt(0)!="-"&&!c.urls[s]){if(!e&&s=="safari"){return}c.load(s,"plugins/"+s+"/editor_plugin"+n.suffix+".js")}});q.loadQueue(function(){if(!v.removed){v.init()}})}r()},init:function(){var v,F=this,G=F.settings,C,z,B=F.getElement(),r,q,D,y,A,E;i.add(F);if(G.theme){G.theme=G.theme.replace(/-/,"");r=h.get(G.theme);F.theme=new r();if(F.theme.init&&G.init_theme){F.theme.init(F,h.urls[G.theme]||n.documentBaseURL.replace(/\/$/,""))}}j(g(G.plugins.replace(/\-/g,"")),function(I){var J=c.get(I),H=c.urls[I]||n.documentBaseURL.replace(/\/$/,""),s;if(J){s=new J(F,H);F.plugins[I]=s;if(s.init){s.init(F,H)}}});if(G.popup_css!==false){if(G.popup_css){G.popup_css=F.documentBaseURI.toAbsolute(G.popup_css)}else{G.popup_css=F.baseURI.toAbsolute("themes/"+G.theme+"/skins/"+G.skin+"/dialog.css")}}if(G.popup_css_add){G.popup_css+=","+F.documentBaseURI.toAbsolute(G.popup_css_add)}F.controlManager=new n.ControlManager(F);if(G.custom_undo_redo){F.onBeforeExecCommand.add(function(u,I,H,J,s){if(I!="Undo"&&I!="Redo"&&I!="mceRepaint"&&(!s||!s.skip_undo)){if(!F.undoManager.hasUndo()){F.undoManager.add()}}});F.onExecCommand.add(function(u,I,H,J,s){if(I!="Undo"&&I!="Redo"&&I!="mceRepaint"&&(!s||!s.skip_undo)){F.undoManager.add()}})}F.onExecCommand.add(function(s,u){if(!/^(FontName|FontSize)$/.test(u)){F.nodeChanged()}});if(a){function x(s,u){if(!u||!u.initial){F.execCommand("mceRepaint")}}F.onUndo.add(x);F.onRedo.add(x);F.onSetContent.add(x)}F.onBeforeRenderUI.dispatch(F,F.controlManager);if(G.render_ui){C=G.width||B.style.width||B.offsetWidth;z=G.height||B.style.height||B.offsetHeight;F.orgDisplay=B.style.display;E=/^[0-9\.]+(|px)$/i;if(E.test(""+C)){C=Math.max(parseInt(C)+(r.deltaWidth||0),100)}if(E.test(""+z)){z=Math.max(parseInt(z)+(r.deltaHeight||0),100)}r=F.theme.renderUI({targetNode:B,width:C,height:z,deltaWidth:G.delta_width,deltaHeight:G.delta_height});F.editorContainer=r.editorContainer}if(document.domain&&location.hostname!=document.domain){n.relaxedDomain=document.domain}o.setStyles(r.sizeContainer||r.editorContainer,{width:C,height:z});z=(r.iframeHeight||z)+(typeof(z)=="number"?(r.deltaHeight||0):"");if(z<100){z=100}F.iframeHTML=G.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(G.document_base_url!=n.documentBaseURL){F.iframeHTML+='<base href="'+F.documentBaseURI.getURI()+'" />'}F.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(n.relaxedDomain){F.iframeHTML+='<script type="text/javascript">document.domain = "'+n.relaxedDomain+'";<\/script>'}y=G.body_id||"tinymce";if(y.indexOf("=")!=-1){y=F.getParam("body_id","","hash");y=y[F.id]||y}A=G.body_class||"";if(A.indexOf("=")!=-1){A=F.getParam("body_class","","hash");A=A[F.id]||""}F.iframeHTML+='</head><body id="'+y+'" class="mceContentBody '+A+'"></body></html>';if(n.relaxedDomain){if(b||(n.isOpera&&parseFloat(opera.version())>=9.5)){D='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+F.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}else{if(n.isOpera){D='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()'}}}v=o.add(r.iframeContainer,"iframe",{id:F.id+"_ifr",src:D||'javascript:""',frameBorder:"0",style:{width:"100%",height:z}});F.contentAreaContainer=r.iframeContainer;o.get(r.editorContainer).style.display=F.orgDisplay;o.get(F.id).style.display="none";if(!b||!n.relaxedDomain){F.setupIframe()}B=v=r=null},setupIframe:function(){var A=this,B=A.settings,u=o.get(A.id),v=A.getDoc(),r,y;if(!b||!n.relaxedDomain){v.open();v.write(A.iframeHTML);v.close()}if(!b){try{if(!B.readonly){v.designMode="On"}}catch(x){}}if(b){y=A.getBody();o.hide(y);if(!B.readonly){y.contentEditable=true}o.show(y)}A.dom=new n.dom.DOMUtils(A.getDoc(),{keep_values:true,url_converter:A.convertURL,url_converter_scope:A,hex_colors:B.force_hex_style_colors,class_filter:B.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:B.valid_styles});A.schema=new n.dom.Schema();A.serializer=new n.dom.Serializer(f(B,{valid_elements:B.verify_html===false?"*[*]":B.valid_elements,dom:A.dom,schema:A.schema}));A.selection=new n.dom.Selection(A.dom,A.getWin(),A.serializer);A.formatter=new n.Formatter(this);A.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left",display:"",marginLeft:"",marginRight:""}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto","float":""}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto","float":""}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right",display:"",marginLeft:"",marginRight:""}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"}},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"}},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},blockquote:{block:"blockquote",wrapper:1},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false},{selector:"*",attributes:["style","class"],expand:false}]});j("p h1 h2 h3 h4 h5 h6 div address pre".split(/\s/),function(s){A.formatter.register(s,{block:s})});A.formatter.register(A.settings.formats);A.undoManager=new n.UndoManager(A);A.undoManager.onAdd.add(function(C,s){if(!s.initial){return A.onChange.dispatch(A,s,C)}});A.undoManager.onUndo.add(function(C,s){return A.onUndo.dispatch(A,s,C)});A.undoManager.onRedo.add(function(C,s){return A.onRedo.dispatch(A,s,C)});A.forceBlocks=new n.ForceBlocks(A,{forced_root_block:B.forced_root_block});A.editorCommands=new n.EditorCommands(A);A.serializer.onPreProcess.add(function(s,C){return A.onPreProcess.dispatch(A,C,s)});A.serializer.onPostProcess.add(function(s,C){return A.onPostProcess.dispatch(A,C,s)});A.onPreInit.dispatch(A);if(!B.gecko_spellcheck){A.getBody().spellcheck=0}if(!B.readonly){A._addEvents()}A.controlManager.onPostRender.dispatch(A,A.controlManager);A.onPostRender.dispatch(A);if(B.directionality){A.getBody().dir=B.directionality}if(B.nowrap){A.getBody().style.whiteSpace="nowrap"}if(B.custom_elements){function z(s,C){j(g(B.custom_elements),function(D){var E;if(D.indexOf("~")===0){D=D.substring(1);E="span"}else{E="div"}C.content=C.content.replace(new RegExp("<("+D+")([^>]*)>","g"),"<"+E+' _mce_name="$1"$2>');C.content=C.content.replace(new RegExp("</("+D+")>","g"),"</"+E+">")})}A.onBeforeSetContent.add(z);A.onPostProcess.add(function(s,C){if(C.set){z(s,C)}})}if(B.handle_node_change_callback){A.onNodeChange.add(function(C,s,D){A.execCallback("handle_node_change_callback",A.id,D,-1,-1,true,A.selection.isCollapsed())})}if(B.save_callback){A.onSaveContent.add(function(s,D){var C=A.execCallback("save_callback",A.id,D.content,A.getBody());if(C){D.content=C}})}if(B.onchange_callback){A.onChange.add(function(C,s){A.execCallback("onchange_callback",A,s)})}if(B.convert_newlines_to_brs){A.onBeforeSetContent.add(function(s,C){if(C.initial){C.content=C.content.replace(/\r?\n/g,"<br />")}})}if(B.fix_nesting&&b){A.onBeforeSetContent.add(function(s,C){C.content=A._fixNesting(C.content)})}if(B.preformatted){A.onPostProcess.add(function(s,C){C.content=C.content.replace(/^\s*<pre.*?>/,"");C.content=C.content.replace(/<\/pre>\s*$/,"");if(C.set){C.content='<pre class="mceItemHidden">'+C.content+"</pre>"}})}if(B.verify_css_classes){A.serializer.attribValueFilter=function(F,D){var E,C;if(F=="class"){if(!A.classesRE){C=A.dom.getClasses();if(C.length>0){E="";j(C,function(s){E+=(E?"|":"")+s["class"]});A.classesRE=new RegExp("("+E+")","gi")}}return !A.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(D)||A.classesRE.test(D)?D:""}return D}}if(B.cleanup_callback){A.onBeforeSetContent.add(function(s,C){C.content=A.execCallback("cleanup_callback","insert_to_editor",C.content,C)});A.onPreProcess.add(function(s,C){if(C.set){A.execCallback("cleanup_callback","insert_to_editor_dom",C.node,C)}if(C.get){A.execCallback("cleanup_callback","get_from_editor_dom",C.node,C)}});A.onPostProcess.add(function(s,C){if(C.set){C.content=A.execCallback("cleanup_callback","insert_to_editor",C.content,C)}if(C.get){C.content=A.execCallback("cleanup_callback","get_from_editor",C.content,C)}})}if(B.save_callback){A.onGetContent.add(function(s,C){if(C.save){C.content=A.execCallback("save_callback",A.id,C.content,A.getBody())}})}if(B.handle_event_callback){A.onEvent.add(function(s,C,D){if(A.execCallback("handle_event_callback",C,s,D)===false){k.cancel(C)}})}A.onSetContent.add(function(){A.addVisual(A.getBody())});if(B.padd_empty_editor){A.onPostProcess.add(function(s,C){C.content=C.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(a){function q(s,C){j(s.dom.select("a"),function(E){var D=E.parentNode;if(s.dom.isBlock(D)&&D.lastChild===E){s.dom.add(D,"br",{_mce_bogus:1})}})}A.onExecCommand.add(function(s,C){if(C==="CreateLink"){q(s)}});A.onSetContent.add(A.selection.onSetContent.add(q));if(!B.readonly){try{v.designMode="Off";v.designMode="On"}catch(x){}}}setTimeout(function(){if(A.removed){return}A.load({initial:true,format:(B.cleanup_on_startup?"html":"raw")});A.startContent=A.getContent({format:"raw"});A.initialized=true;A.onInit.dispatch(A);A.execCallback("setupcontent_callback",A.id,A.getBody(),A.getDoc());A.execCallback("init_instance_callback",A);A.focus(true);A.nodeChanged({initial:1});if(B.content_css){n.each(g(B.content_css),function(s){A.dom.loadCSS(A.documentBaseURI.toAbsolute(s))})}if(B.auto_focus){setTimeout(function(){var s=i.get(B.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getWin().focus()},100)}},1);u=null},focus:function(r){var u,q=this,s=q.settings.content_editable;if(!r){if(!s&&(!b||q.selection.getNode().ownerDocument!=q.getDoc())){q.getWin().focus()}}if(i.activeEditor!=q){if((u=i.activeEditor)!=null){u.onDeactivate.dispatch(u,q)}q.onActivate.dispatch(q,u)}i._setActive(q)},execCallback:function(v){var q=this,u=q.settings[v],r;if(!u){return}if(q.callbackLookup&&(r=q.callbackLookup[v])){u=r.func;r=r.scope}if(d(u,"string")){r=u.replace(/\.\w+$/,"");r=r?n.resolve(r):0;u=n.resolve(u);q.callbackLookup=q.callbackLookup||{};q.callbackLookup[v]={func:u,scope:r}}return u.apply(r||q,Array.prototype.slice.call(arguments,1))},translate:function(q){var u=this.settings.language||"en",r=i.i18n;if(!q){return""}return r[u+"."+q]||q.replace(/{\#([^}]+)\}/g,function(v,s){return r[u+"."+s]||"{#"+s+"}"})},getLang:function(r,q){return i.i18n[(this.settings.language||"en")+"."+r]||(d(q)?q:"{#"+r+"}")},getParam:function(y,s,q){var u=n.trim,r=d(this.settings[y])?this.settings[y]:s,x;if(q==="hash"){x={};if(d(r,"string")){j(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(z){z=z.split("=");if(z.length>1){x[u(z[0])]=u(z[1])}else{x[u(z[0])]=u(z)}})}else{x=r}return x}return r},nodeChanged:function(u){var q=this,r=q.selection,v=r.getNode()||q.getBody();if(q.initialized){u=u||{};v=b&&v.ownerDocument!=q.getDoc()?q.getBody():v;u.parents=[];q.dom.getParent(v,function(s){if(s.nodeName=="BODY"){return true}u.parents.push(s)});q.onNodeChange.dispatch(q,u?u.controlManager||q.controlManager:q.controlManager,v,r.isCollapsed(),u)}},addButton:function(u,r){var q=this;q.buttons=q.buttons||{};q.buttons[u]=r},addCommand:function(u,r,q){this.execCommands[u]={func:r,scope:q||this}},addQueryStateHandler:function(u,r,q){this.queryStateCommands[u]={func:r,scope:q||this}},addQueryValueHandler:function(u,r,q){this.queryValueCommands[u]={func:r,scope:q||this}},addShortcut:function(s,v,q,u){var r=this,x;if(!r.settings.custom_shortcuts){return false}r.shortcuts=r.shortcuts||{};if(d(q,"string")){x=q;q=function(){r.execCommand(x,false,null)}}if(d(q,"object")){x=q;q=function(){r.execCommand(x[0],x[1],x[2])}}j(g(s),function(y){var z={func:q,scope:u||this,desc:v,alt:false,ctrl:false,shift:false};j(g(y,"+"),function(A){switch(A){case"alt":case"ctrl":case"shift":z[A]=true;break;default:z.charCode=A.charCodeAt(0);z.keyCode=A.toUpperCase().charCodeAt(0)}});r.shortcuts[(z.ctrl?"ctrl":"")+","+(z.alt?"alt":"")+","+(z.shift?"shift":"")+","+z.keyCode]=z});return true},execCommand:function(y,x,A,q){var u=this,v=0,z,r;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(y)&&(!q||!q.skip_focus)){u.focus()}z={};u.onBeforeExecCommand.dispatch(u,y,x,A,z);if(z.terminate){return false}if(u.execCallback("execcommand_callback",u.id,u.selection.getNode(),y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}if(z=u.execCommands[y]){r=z.func.call(z.scope,x,A);if(r!==true){u.onExecCommand.dispatch(u,y,x,A,q);return r}}j(u.plugins,function(s){if(s.execCommand&&s.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);v=1;return false}});if(v){return true}if(u.theme&&u.theme.execCommand&&u.theme.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}if(n.GlobalCommands.execCommand(u,y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}if(u.editorCommands.execCommand(y,x,A)){u.onExecCommand.dispatch(u,y,x,A,q);return true}u.getDoc().execCommand(y,x,A);u.onExecCommand.dispatch(u,y,x,A,q)},queryCommandState:function(v){var r=this,x,u;if(r._isHidden()){return}if(x=r.queryStateCommands[v]){u=x.func.call(x.scope);if(u!==true){return u}}x=r.editorCommands.queryCommandState(v);if(x!==-1){return x}try{return this.getDoc().queryCommandState(v)}catch(q){}},queryCommandValue:function(x){var r=this,v,u;if(r._isHidden()){return}if(v=r.queryValueCommands[x]){u=v.func.call(v.scope);if(u!==true){return u}}v=r.editorCommands.queryCommandValue(x);if(d(v)){return v}try{return this.getDoc().queryCommandValue(x)}catch(q){}},show:function(){var q=this;o.show(q.getContainer());o.hide(q.id);q.load()},hide:function(){var q=this,r=q.getDoc();if(b&&r){r.execCommand("SelectAll")}q.save();o.hide(q.getContainer());o.setStyle(q.id,"display",q.orgDisplay)},isHidden:function(){return !o.isHidden(this.id)},setProgressState:function(q,r,s){this.onSetProgressState.dispatch(this,q,r,s);return q},load:function(u){var q=this,s=q.getElement(),r;if(s){u=u||{};u.load=true;r=q.setContent(d(s.value)?s.value:s.innerHTML,u);u.element=s;if(!u.no_events){q.onLoadContent.dispatch(q,u)}u.element=s=null;return r}},save:function(v){var q=this,u=q.getElement(),r,s;if(!u||!q.initialized){return}v=v||{};v.save=true;if(!v.no_events){q.undoManager.typing=0;q.undoManager.add()}v.element=u;r=v.content=q.getContent(v);if(!v.no_events){q.onSaveContent.dispatch(q,v)}r=v.content;if(!/TEXTAREA|INPUT/i.test(u.nodeName)){u.innerHTML=r;if(s=o.getParent(q.id,"form")){j(s.elements,function(x){if(x.name==q.id){x.value=r;return false}})}}else{u.value=r}v.element=u=null;return r},setContent:function(r,s){var q=this;s=s||{};s.format=s.format||"html";s.set=true;s.content=r;if(!s.no_events){q.onBeforeSetContent.dispatch(q,s)}if(!n.isIE&&(r.length===0||/^\s+$/.test(r))){s.content=q.dom.setHTML(q.getBody(),'<br _mce_bogus="1" />');s.format="raw"}s.content=q.dom.setHTML(q.getBody(),n.trim(s.content));if(s.format!="raw"&&q.settings.cleanup){s.getInner=true;s.content=q.dom.setHTML(q.getBody(),q.serializer.serialize(q.getBody(),s))}if(!s.no_events){q.onSetContent.dispatch(q,s)}return s.content},getContent:function(s){var q=this,r;s=s||{};s.format=s.format||"html";s.get=true;if(!s.no_events){q.onBeforeGetContent.dispatch(q,s)}if(s.format!="raw"&&q.settings.cleanup){s.getInner=true;r=q.serializer.serialize(q.getBody(),s)}else{r=q.getBody().innerHTML}r=r.replace(/^\s*|\s*$/g,"");s.content=r;if(!s.no_events){q.onGetContent.dispatch(q,s)}return s.content},isDirty:function(){var q=this;return n.trim(q.startContent)!=n.trim(q.getContent({format:"raw",no_events:1}))&&!q.isNotDirty},getContainer:function(){var q=this;if(!q.container){q.container=o.get(q.editorContainer||q.id+"_parent")}return q.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var q=this,r;if(!q.contentWindow){r=o.get(q.id+"_ifr");if(r){q.contentWindow=r.contentWindow}}return q.contentWindow},getDoc:function(){var r=this,q;if(!r.contentDocument){q=r.getWin();if(q){r.contentDocument=q.document}}return r.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(q,y,x){var r=this,v=r.settings;if(v.urlconverter_callback){return r.execCallback("urlconverter_callback",q,x,true,y)}if(!v.convert_urls||(x&&x.nodeName=="LINK")||q.indexOf("file:")===0){return q}if(v.relative_urls){return r.documentBaseURI.toRelative(q)}q=r.documentBaseURI.toAbsolute(q,v.remove_script_host);return q},addVisual:function(u){var q=this,r=q.settings;u=u||q.getBody();if(!d(q.hasVisual)){q.hasVisual=r.visual}j(q.dom.select("table,a",u),function(x){var s;switch(x.nodeName){case"TABLE":s=q.dom.getAttrib(x,"border");if(!s||s=="0"){if(q.hasVisual){q.dom.addClass(x,r.visual_table_class)}else{q.dom.removeClass(x,r.visual_table_class)}}return;case"A":s=q.dom.getAttrib(x,"name");if(s){if(q.hasVisual){q.dom.addClass(x,"mceItemAnchor")}else{q.dom.removeClass(x,"mceItemAnchor")}}return}});q.onVisualAid.dispatch(q,u,q.hasVisual)},remove:function(){var q=this,r=q.getContainer();q.removed=1;q.hide();q.execCallback("remove_instance_callback",q);q.onRemove.dispatch(q);q.onExecCommand.listeners=[];i.remove(q);o.remove(r)},destroy:function(r){var q=this;if(q.destroyed){return}if(!r){n.removeUnload(q.destroy);tinyMCE.onBeforeUnload.remove(q._beforeUnload);if(q.theme&&q.theme.destroy){q.theme.destroy()}q.controlManager.destroy();q.selection.destroy();q.dom.destroy();if(!q.settings.content_editable){k.clear(q.getWin());k.clear(q.getDoc())}k.clear(q.getBody());k.clear(q.formElement)}if(q.formElement){q.formElement.submit=q.formElement._mceOldSubmit;q.formElement._mceOldSubmit=null}q.contentAreaContainer=q.formElement=q.container=q.settings.content_element=q.bodyElement=q.contentDocument=q.contentWindow=null;if(q.selection){q.selection=q.selection.win=q.selection.dom=q.selection.dom.doc=null}q.destroyed=1},_addEvents:function(){var x=this,v,z=x.settings,y={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function u(B,C){var s=B.type;if(x.removed){return}if(x.onEvent.dispatch(x,B,C)!==false){x[y[B.fakeType||B.type]].dispatch(x,B,C)}}j(y,function(B,s){switch(s){case"contextmenu":if(n.isOpera){x.dom.bind(x.getBody(),"mousedown",function(C){if(C.ctrlKey){C.fakeType="contextmenu";u(C)}})}else{x.dom.bind(x.getBody(),s,u)}break;case"paste":x.dom.bind(x.getBody(),s,function(C){u(C)});break;case"submit":case"reset":x.dom.bind(x.getElement().form||o.getParent(x.id,"form"),s,u);break;default:x.dom.bind(z.content_editable?x.getBody():x.getDoc(),s,u)}});x.dom.bind(z.content_editable?x.getBody():(a?x.getDoc():x.getWin()),"focus",function(s){x.focus(true)});if(n.isGecko){x.dom.bind(x.getDoc(),"DOMNodeInserted",function(B){var s;B=B.target;if(B.nodeType===1&&B.nodeName==="IMG"&&(s=B.getAttribute("_mce_src"))){B.src=x.documentBaseURI.toAbsolute(s)}})}if(a){function q(){var C=this,E=C.getDoc(),D=C.settings;if(a&&!D.readonly){if(C._isHidden()){try{if(!D.content_editable){E.designMode="On"}}catch(B){}}try{E.execCommand("styleWithCSS",0,false)}catch(B){if(!C._isHidden()){try{E.execCommand("useCSS",0,true)}catch(B){}}}if(!D.table_inline_editing){try{E.execCommand("enableInlineTableEditing",false,false)}catch(B){}}if(!D.object_resizing){try{E.execCommand("enableObjectResizing",false,false)}catch(B){}}}}x.onBeforeExecCommand.add(q);x.onMouseDown.add(q)}if(n.isWebKit){x.onClick.add(function(s,B){B=B.target;if(B.nodeName=="IMG"){x.selection.getSel().setBaseAndExtent(B,0,B,1)}})}x.onMouseUp.add(x.nodeChanged);x.onClick.add(x.nodeChanged);x.onKeyUp.add(function(s,B){var C=B.keyCode;if((C>=33&&C<=36)||(C>=37&&C<=40)||C==13||C==45||C==46||C==8||(n.isMac&&(C==91||C==93))||B.ctrlKey){x.nodeChanged()}});x.onReset.add(function(){x.setContent(x.startContent,{format:"raw"})});if(z.custom_shortcuts){if(z.custom_undo_redo_keyboard_shortcuts){x.addShortcut("ctrl+z",x.getLang("undo_desc"),"Undo");x.addShortcut("ctrl+y",x.getLang("redo_desc"),"Redo")}if(a){x.addShortcut("ctrl+b",x.getLang("bold_desc"),"Bold");x.addShortcut("ctrl+i",x.getLang("italic_desc"),"Italic");x.addShortcut("ctrl+u",x.getLang("underline_desc"),"Underline")}for(v=1;v<=6;v++){x.addShortcut("ctrl+"+v,"",["FormatBlock",false,"h"+v])}x.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);x.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);x.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function A(B){var s=null;if(!B.altKey&&!B.ctrlKey&&!B.metaKey){return s}j(x.shortcuts,function(C){if(n.isMac&&C.ctrl!=B.metaKey){return}else{if(!n.isMac&&C.ctrl!=B.ctrlKey){return}}if(C.alt!=B.altKey){return}if(C.shift!=B.shiftKey){return}if(B.keyCode==C.keyCode||(B.charCode&&B.charCode==C.charCode)){s=C;return false}});return s}x.onKeyUp.add(function(s,B){var C=A(B);if(C){return k.cancel(B)}});x.onKeyPress.add(function(s,B){var C=A(B);if(C){return k.cancel(B)}});x.onKeyDown.add(function(s,B){var C=A(B);if(C){C.func.call(C.scope);return k.cancel(B)}})}if(n.isIE){x.dom.bind(x.getDoc(),"controlselect",function(C){var B=x.resizeInfo,s;C=C.target;if(C.nodeName!=="IMG"){return}if(B){x.dom.unbind(B.node,B.ev,B.cb)}if(!x.dom.hasClass(C,"mceItemNoResize")){ev="resizeend";s=x.dom.bind(C,ev,function(E){var D;E=E.target;if(D=x.dom.getStyle(E,"width")){x.dom.setAttrib(E,"width",D.replace(/[^0-9%]+/g,""));x.dom.setStyle(E,"width","")}if(D=x.dom.getStyle(E,"height")){x.dom.setAttrib(E,"height",D.replace(/[^0-9%]+/g,""));x.dom.setStyle(E,"height","")}})}else{ev="resizestart";s=x.dom.bind(C,"resizestart",k.cancel,k)}B=x.resizeInfo={node:C,ev:ev,cb:s}});x.onKeyDown.add(function(s,B){switch(B.keyCode){case 8:if(x.selection.getRng().item){x.selection.getRng().item(0).removeNode();return k.cancel(B)}}})}if(n.isOpera){x.onClick.add(function(s,B){k.prevent(B)})}if(z.custom_undo_redo){function r(){x.undoManager.typing=0;x.undoManager.add()}x.dom.bind(x.getDoc(),"focusout",function(s){if(!x.removed&&x.undoManager.typing){r()}});x.onKeyUp.add(function(s,B){if((B.keyCode>=33&&B.keyCode<=36)||(B.keyCode>=37&&B.keyCode<=40)||B.keyCode==13||B.keyCode==45||B.ctrlKey){r()}});x.onKeyDown.add(function(s,B){if((B.keyCode>=33&&B.keyCode<=36)||(B.keyCode>=37&&B.keyCode<=40)||B.keyCode==13||B.keyCode==45){if(x.undoManager.typing){r()}return}if(!x.undoManager.typing){x.undoManager.add();x.undoManager.typing=1}});x.onMouseDown.add(function(){if(x.undoManager.typing){r()}})}},_isHidden:function(){var q;if(!a){return 0}q=this.selection.getSel();return(!q||!q.rangeCount||q.rangeCount==0)},_fixNesting:function(r){var u=[],q;r=r.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(v,s,y){var x;if(s==="/"){if(!u.length){return""}if(y!==u[u.length-1].tag){for(q=u.length-1;q>=0;q--){if(u[q].tag===y){u[q].close=1;break}}return""}else{u.pop();if(u.length&&u[u.length-1].close){v=v+"</"+u[u.length-1].tag+">";u.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(y)){return v}if(/\/>$/.test(v)){return v}u.push({tag:y})}return v});for(q=u.length-1;q>=0;q--){r+="</"+u[q].tag+">"}return r}})})(tinymce);(function(d){var f=d.each,c=d.isIE,a=d.isGecko,b=d.isOpera,e=d.isWebKit;d.create("tinymce.EditorCommands",{EditorCommands:function(g){this.editor=g},execCommand:function(k,j,l){var h=this,g=h.editor,i;switch(k){case"mceResetDesignMode":case"mceBeginUndoLevel":return true;case"unlink":h.UnLink();return true;case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":h.mceJustify(k,k.substring(7).toLowerCase());return true;default:i=this[k];if(i){i.call(this,j,l);return true}}return false},Indent:function(){var g=this.editor,l=g.dom,j=g.selection,k,h,i;h=g.settings.indentation;i=/[a-z%]+$/i.exec(h);h=parseInt(h);if(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList()){f(j.getSelectedBlocks(),function(m){l.setStyle(m,"paddingLeft",(parseInt(m.style.paddingLeft||0)+h)+i)});return}g.getDoc().execCommand("Indent",false,null)},Outdent:function(){var h=this.editor,m=h.dom,k=h.selection,l,g,i,j;i=h.settings.indentation;j=/[a-z%]+$/i.exec(i);i=parseInt(i);if(!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList()){f(k.getSelectedBlocks(),function(n){g=Math.max(0,parseInt(n.style.paddingLeft||0)-i);m.setStyle(n,"paddingLeft",g?g+j:"")});return}h.getDoc().execCommand("Outdent",false,null)},mceSetContent:function(h,g){this.editor.setContent(g)},mceToggleVisualAid:function(){var g=this.editor;g.hasVisual=!g.hasVisual;g.addVisual()},mceReplaceContent:function(h,g){var i=this.editor.selection;i.setContent(g.replace(/\{\$selection\}/g,i.getContent({format:"text"})))},mceInsertLink:function(i,h){var g=this.editor,j=g.selection,k=g.dom.getParent(j.getNode(),"a");if(d.is(h,"string")){h={href:h}}function l(m){f(h,function(o,n){g.dom.setAttrib(m,n,o)})}if(!k){g.execCommand("CreateLink",false,"javascript:mctmp(0);");f(g.dom.select("a[href=javascript:mctmp(0);]"),function(m){l(m)})}else{if(h.href){l(k)}else{g.dom.remove(k,1)}}},Italic:function(){this._toggle("italic")},queryStateItalic:function(){return this._match("italic")},Bold:function(){this._toggle("bold")},queryStateBold:function(){return this._match("bold")},Underline:function(){this._toggle("underline")},queryStateUnderline:function(){return this._match("underline")},Strikethrough:function(){this._toggle("strikethrough")},queryStateStrikethrough:function(){return this._match("strikethrough")},ForeColor:function(h,g){this._toggle("forecolor",g)},HiliteColor:function(h,g){this._toggle("hilitecolor",g)},RemoveFormat:function(){this.editor.formatter.remove("removeformat")},FontName:function(h,g){this._toggle("fontname",g)},FontSize:function(i,h){var g=this.editor,k=g.settings,j,l;if(h>=1&&h<=7){l=d.explode(k.font_size_style_values);j=d.explode(k.font_size_classes);if(j){h=j[h-1]||h}else{h=l[h-1]||h}}this._toggle("fontsize",h)},mceBlockQuote:function(){this._toggle("blockquote")},queryStatemceBlockQuote:function(){return this._match("blockquote")},UnLink:function(){var g=this.editor,h=g.selection;if(h.isCollapsed()){h.select(h.getNode())}g.getDoc().execCommand("unlink",false,null);h.collapse(0)},queryCommandValue:function(h){var g=this["queryValue"+h];if(g){return g.call(this,h)}return false},queryCommandState:function(h){var g;switch(h){case"JustifyLeft":case"JustifyCenter":case"JustifyRight":case"JustifyFull":return this.queryStateJustify(h,h.substring(7).toLowerCase());default:if(g=this["queryState"+h]){return g.call(this,h)}}return -1},_queryState:function(h){try{return this.editor.getDoc().queryCommandState(h)}catch(g){}},queryValueFontSize:function(){var h=this.editor,g=0,i;if(i=h.dom.getParent(h.selection.getNode(),"span")){g=i.style.fontSize}return g},queryValueFontName:function(){var h=this.editor,g,i;if(i=h.dom.getParent(h.selection.getNode(),"span")){g=i.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}return g},mceJustify:function(h,g){return this.editor.formatter.toggle("align"+g)},queryStateJustify:function(h,g){return this._match("align"+g)},FormatBlock:function(g,h){return this.editor.formatter.toggle(h)},mceCleanup:function(){var g=this.editor,i=g.selection,h=i.getBookmark();g.setContent(g.getContent({cleanup:true}));i.moveToBookmark(h)},mceRemoveNode:function(j,k){var h=this.editor,i=h.selection,g,l=k||i.getNode();if(l==h.getBody()){return}g=i.getBookmark();h.dom.remove(l,1);i.moveToBookmark(g);h.nodeChanged()},mceSelectNodeDepth:function(i,j){var g=this.editor,h=g.selection,k=0;g.dom.getParent(h.getNode(),function(l){if(l.nodeType==1&&k++==j){h.select(l);g.nodeChanged();return false}},g.getBody())},mceSelectNode:function(h,g){this.editor.selection.select(g)},mceInsertContent:function(g,h){this.editor.selection.setContent(h)},mceInsertRawHTML:function(h,i){var g=this.editor;g.selection.setContent("tiny_mce_marker");g.setContent(g.getContent().replace(/tiny_mce_marker/g,i))},mceRepaint:function(){var i,g,j=this.editor;if(d.isGecko){try{i=j.selection;g=i.getBookmark(true);if(i.getSel()){i.getSel().selectAllChildren(j.getBody())}i.collapse(true);i.moveToBookmark(g)}catch(h){}}},queryStateOutdent:function(){var g=this.editor,h;if(g.settings.inline_styles){if((h=g.dom.getParent(g.selection.getStart(),g.dom.isBlock))&&parseInt(h.style.paddingLeft)>0){return true}if((h=g.dom.getParent(g.selection.getEnd(),g.dom.isBlock))&&parseInt(h.style.paddingLeft)>0){return true}}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||(!g.settings.inline_styles&&!!g.dom.getParent(g.selection.getNode(),"BLOCKQUOTE"))},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},_match:function(g){return this.editor.formatter.match(g)},_toggle:function(g,h){this.editor.formatter.toggle(g,h?{value:h}:null)},InsertHorizontalRule:function(){this.editor.selection.setContent("<hr />")}})})(tinymce);(function(a){a.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(c){var d=this,b=a.util.Dispatcher;d.editor=c;d.data=[];d.onAdd=new b(this);d.onUndo=new b(this);d.onRedo=new b(this)},add:function(d){var g=this,f,e=g.editor,c,h=e.settings,j;d=d||{};d.content=d.content||e.getContent({format:"raw",no_events:1});d.content=d.content.replace(/^\s*|\s*$/g,"");j=g.data[g.index];if(j&&j.content==d.content){if(g.index>0||g.data.length==1){return null}}if(h.custom_undo_redo_levels){if(g.data.length>h.custom_undo_redo_levels){for(f=0;f<g.data.length-1;f++){g.data[f]=g.data[f+1]}g.data.length--;g.index=g.data.length}}if(h.custom_undo_redo_restore_selection){d.bookmark=c=d.bookmark||e.selection.getBookmark(2,true)}if(g.index<g.data.length-1){if(g.index==0){g.data=[]}else{g.data.length=g.index+1}}g.data.push(d);g.index=g.data.length-1;g.onAdd.dispatch(g,d);e.isNotDirty=0;return d},undo:function(){var e=this,c=e.editor,b=b,d;if(e.typing){e.add();e.typing=0}if(e.index>0){b=e.data[--e.index];c.setContent(b.content,{format:"raw"});c.selection.moveToBookmark(b.bookmark);e.onUndo.dispatch(e,b)}return b},redo:function(){var d=this,c=d.editor,b=null;if(d.index<d.data.length-1){b=d.data[++d.index];c.setContent(b.content,{format:"raw"});c.selection.moveToBookmark(b.bookmark);d.onRedo.dispatch(d,b)}return b},clear:function(){var b=this;b.data=[];b.index=0;b.typing=0},hasUndo:function(){return this.index>0||this.typing},hasRedo:function(){return this.index<this.data.length-1}})})(tinymce);(function(j){var i,c,a,b,h,g;i=j.dom.Event;c=j.isIE;a=j.isGecko;b=j.isOpera;h=j.each;g=j.extend;function f(l,m){var k=m.ownerDocument.createRange();k.setStart(l.endContainer,l.endOffset);k.setEndAfter(m);return k.cloneContents().textContent.length==0}function e(k){k=k.innerHTML;k=k.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");k=k.replace(/<[^>]+>/g,"");return k.replace(/[ \t\r\n]+/g,"")==""}function d(m,o,k){var l,n;if(e(k)){l=o.getParent(k,"ul,ol");if(!o.getParent(l.parentNode,"ul,ol")){o.split(l,k);n=o.create("p",0,'<br _mce_bogus="1" />');o.replace(n,k);m.select(n,1)}return false}return true}j.create("tinymce.ForceBlocks",{ForceBlocks:function(l){var m=this,n=l.settings,o;m.editor=l;m.dom=l.dom;o=(n.forced_root_block||"p").toLowerCase();n.element=o.toUpperCase();l.onPreInit.add(m.setup,m);m.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+o+">","gi");m.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,o),"gi");m.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,o),"gi");m.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,o),"gi");m.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi");function k(p,q){if(b){q.content=q.content.replace(m.reOpera,"</"+o+">")}q.content=q.content.replace(m.rePadd,"<"+o+"$1$2$3$4$5$6>\u00a0</"+o+">");if(!c&&!b&&q.set){q.content=q.content.replace(m.reNbsp2BR1,"<"+o+"$1$2><br /></"+o+">");q.content=q.content.replace(m.reNbsp2BR2,"<"+o+"$1$2><br /></"+o+">")}else{q.content=q.content.replace(m.reBR2Nbsp,"<"+o+"$1$2>\u00a0</"+o+">")}}l.onBeforeSetContent.add(k);l.onPostProcess.add(k);if(n.forced_root_block){l.onInit.add(m.forceRoots,m);l.onSetContent.add(m.forceRoots,m);l.onBeforeGetContent.add(m.forceRoots,m)}},setup:function(){var l=this,k=l.editor,m=k.settings;if(m.forced_root_block){k.onBeforeExecCommand.add(l.forceRoots,l);k.onKeyUp.add(l.forceRoots,l);k.onPreProcess.add(l.forceRoots,l)}if(m.force_br_newlines){if(c){k.onKeyPress.add(function(o,q){var r,p=o.selection;if(q.keyCode==13&&p.getNode().nodeName!="LI"){p.setContent('<br id="__" /> ',{format:"raw"});r=o.dom.get("__");r.removeAttribute("id");p.select(r);p.collapse();return i.cancel(q)}})}return}if(!c&&m.force_p_newlines){k.onKeyPress.add(function(o,p){if(p.keyCode==13&&!p.shiftKey){if(!l.insertPara(p)){i.cancel(p)}}});if(a){k.onKeyDown.add(function(o,p){if((p.keyCode==8||p.keyCode==46)&&!p.shiftKey){l.backspaceDelete(p,p.keyCode==8)}})}}function n(p,o){var q=k.dom.create(o);h(p.attributes,function(r){if(r.specified&&r.nodeValue){q.setAttribute(r.nodeName.toLowerCase(),r.nodeValue)}});h(p.childNodes,function(r){q.appendChild(r.cloneNode(true))});p.parentNode.replaceChild(q,p);return q}k.onPreProcess.add(function(p,q){h(p.dom.select("p,h1,h2,h3,h4,h5,h6,div",q.node),function(o){if(e(o)){h(p.dom.select("span,em,strong,b,i",q.node),function(r){if(!r.hasChildNodes()){r.appendChild(p.getDoc().createTextNode("\u00a0"));return false}})}})});if(c){if(m.element!="P"){k.onKeyPress.add(function(o,p){l.lastElm=o.selection.getNode().nodeName});k.onKeyUp.add(function(p,r){var u,q=p.selection,s=q.getNode(),o=p.getBody();if(o.childNodes.length===1&&s.nodeName=="P"){s=n(s,m.element);q.select(s);q.collapse();p.nodeChanged()}else{if(r.keyCode==13&&!r.shiftKey&&l.lastElm!="P"){u=p.dom.getParent(s,"p");if(u){n(u,m.element);p.nodeChanged()}}}})}}},find:function(q,m,o){var l=this.editor,k=l.getDoc().createTreeWalker(q,4,null,false),p=-1;while(q=k.nextNode()){p++;if(m==0&&q==o){return p}if(m==1&&p==o){return q}}return -1},forceRoots:function(q,F){var v=this,q=v.editor,J=q.getBody(),G=q.getDoc(),M=q.selection,x=M.getSel(),y=M.getRng(),K=-2,p,D,k,l,H=-16777215;var I,m,L,C,z,o=J.childNodes,B,A,u;for(B=o.length-1;B>=0;B--){I=o[B];if(I.nodeType===1&&I.getAttribute("_mce_type")){m=null;continue}if(I.nodeType===3||(!v.dom.isBlock(I)&&I.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(I.nodeName))){if(!m){if(I.nodeType!=3||/[^\s]/g.test(I.nodeValue)){if(K==-2&&y){if(!c){if(y.startContainer.nodeType==1&&(A=y.startContainer.childNodes[y.startOffset])&&A.nodeType==1){u=A.getAttribute("id");A.setAttribute("id","__mce")}else{if(q.dom.getParent(y.startContainer,function(n){return n===J})){D=y.startOffset;k=y.endOffset;K=v.find(J,0,y.startContainer);p=v.find(J,0,y.endContainer)}}}else{l=G.body.createTextRange();l.moveToElementText(J);l.collapse(1);L=l.move("character",H)*-1;l=y.duplicate();l.collapse(1);C=l.move("character",H)*-1;l=y.duplicate();l.collapse(0);z=(l.move("character",H)*-1)-C;K=C-L;p=z}}m=q.dom.create(q.settings.forced_root_block);I.parentNode.replaceChild(m,I);m.appendChild(I)}}else{if(m.hasChildNodes()){m.insertBefore(I,m.firstChild)}else{m.appendChild(I)}}}else{m=null}}if(K!=-2){if(!c){m=J.getElementsByTagName(q.settings.element)[0];y=G.createRange();if(K!=-1){y.setStart(v.find(J,1,K),D)}else{y.setStart(m,0)}if(p!=-1){y.setEnd(v.find(J,1,p),k)}else{y.setEnd(m,0)}if(x){x.removeAllRanges();x.addRange(y)}}else{try{y=x.createRange();y.moveToElementText(J);y.collapse(1);y.moveStart("character",K);y.moveEnd("character",p);y.select()}catch(E){}}}else{if(!c&&(A=q.dom.get("__mce"))){if(u){A.setAttribute("id",u)}else{A.removeAttribute("id")}y=G.createRange();y.setStartBefore(A);y.setEndBefore(A);M.setRng(y)}}},getParentBlock:function(l){var k=this.dom;return k.getParent(l,k.isBlock)},insertPara:function(P){var D=this,q=D.editor,L=q.dom,Q=q.getDoc(),U=q.settings,E=q.selection.getSel(),F=E.getRangeAt(0),T=Q.body;var I,J,G,N,M,o,l,p,v,k,B,S,m,u,H,K=L.getViewPort(q.getWin()),A,C,z;I=Q.createRange();I.setStart(E.anchorNode,E.anchorOffset);I.collapse(true);J=Q.createRange();J.setStart(E.focusNode,E.focusOffset);J.collapse(true);G=I.compareBoundaryPoints(I.START_TO_END,J)<0;N=G?E.anchorNode:E.focusNode;M=G?E.anchorOffset:E.focusOffset;o=G?E.focusNode:E.anchorNode;l=G?E.focusOffset:E.anchorOffset;if(N===o&&/^(TD|TH)$/.test(N.nodeName)){if(N.firstChild.nodeName=="BR"){L.remove(N.firstChild)}if(N.childNodes.length==0){q.dom.add(N,U.element,null,"<br />");S=q.dom.add(N,U.element,null,"<br />")}else{H=N.innerHTML;N.innerHTML="";q.dom.add(N,U.element,null,H);S=q.dom.add(N,U.element,null,"<br />")}F=Q.createRange();F.selectNodeContents(S);F.collapse(1);q.selection.setRng(F);return false}if(N==T&&o==T&&T.firstChild&&q.dom.isBlock(T.firstChild)){N=o=N.firstChild;M=l=0;I=Q.createRange();I.setStart(N,0);J=Q.createRange();J.setStart(o,0)}N=N.nodeName=="HTML"?Q.body:N;N=N.nodeName=="BODY"?N.firstChild:N;o=o.nodeName=="HTML"?Q.body:o;o=o.nodeName=="BODY"?o.firstChild:o;p=D.getParentBlock(N);v=D.getParentBlock(o);k=p?p.nodeName:U.element;if(p=D.dom.getParent(p,"li,pre")){if(p.nodeName=="LI"){return d(q.selection,D.dom,p)}return true}if(p&&(p.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(L.getStyle(p,"position",1)))){k=U.element;p=null}if(v&&(v.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(L.getStyle(p,"position",1)))){k=U.element;v=null}if(/(TD|TABLE|TH|CAPTION)/.test(k)||(p&&k=="DIV"&&/left|right/gi.test(L.getStyle(p,"float",1)))){k=U.element;p=v=null}B=(p&&p.nodeName==k)?p.cloneNode(0):q.dom.create(k);S=(v&&v.nodeName==k)?v.cloneNode(0):q.dom.create(k);S.removeAttribute("id");if(/^(H[1-6])$/.test(k)&&f(F,p)){S=q.dom.create(U.element)}H=m=N;do{if(H==T||H.nodeType==9||D.dom.isBlock(H)||/(TD|TABLE|TH|CAPTION)/.test(H.nodeName)){break}m=H}while((H=H.previousSibling?H.previousSibling:H.parentNode));H=u=o;do{if(H==T||H.nodeType==9||D.dom.isBlock(H)||/(TD|TABLE|TH|CAPTION)/.test(H.nodeName)){break}u=H}while((H=H.nextSibling?H.nextSibling:H.parentNode));if(m.nodeName==k){I.setStart(m,0)}else{I.setStartBefore(m)}I.setEnd(N,M);B.appendChild(I.cloneContents()||Q.createTextNode(""));try{J.setEndAfter(u)}catch(O){}J.setStart(o,l);S.appendChild(J.cloneContents()||Q.createTextNode(""));F=Q.createRange();if(!m.previousSibling&&m.parentNode.nodeName==k){F.setStartBefore(m.parentNode)}else{if(I.startContainer.nodeName==k&&I.startOffset==0){F.setStartBefore(I.startContainer)}else{F.setStart(I.startContainer,I.startOffset)}}if(!u.nextSibling&&u.parentNode.nodeName==k){F.setEndAfter(u.parentNode)}else{F.setEnd(J.endContainer,J.endOffset)}F.deleteContents();if(b){q.getWin().scrollTo(0,K.y)}if(B.firstChild&&B.firstChild.nodeName==k){B.innerHTML=B.firstChild.innerHTML}if(S.firstChild&&S.firstChild.nodeName==k){S.innerHTML=S.firstChild.innerHTML}if(e(B)){B.innerHTML="<br />"}function R(V,s){var r=[],X,W,y;V.innerHTML="";if(U.keep_styles){W=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(W.nodeName)){X=W.cloneNode(false);L.setAttrib(X,"id","");r.push(X)}}while(W=W.parentNode)}if(r.length>0){for(y=r.length-1,X=V;y>=0;y--){X=X.appendChild(r[y])}r[0].innerHTML=b?"&nbsp;":"<br />";return r[0]}else{V.innerHTML=b?"&nbsp;":"<br />"}}if(e(S)){z=R(S,o)}if(b&&parseFloat(opera.version())<9.5){F.insertNode(B);F.insertNode(S)}else{F.insertNode(S);F.insertNode(B)}S.normalize();B.normalize();function x(r){return Q.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,false).nextNode()||r}F=Q.createRange();F.selectNodeContents(a?x(z||S):z||S);F.collapse(1);E.removeAllRanges();E.addRange(F);A=q.dom.getPos(S).y;C=S.clientHeight;if(A<K.y||A+C>K.y+K.h){q.getWin().scrollTo(0,A<K.y?A:A-K.h+25)}return false},backspaceDelete:function(p,y){var A=this,o=A.editor,u=o.getBody(),m=o.dom,l,q=o.selection,k=q.getRng(),s=k.startContainer,l,v,x;if(s&&o.dom.isBlock(s)&&!/^(TD|TH)$/.test(s.nodeName)&&y){if(s.childNodes.length==0||(s.childNodes.length==1&&s.firstChild.nodeName=="BR")){l=s;while((l=l.previousSibling)&&!o.dom.isBlock(l)){}if(l){if(s!=u.firstChild){v=o.dom.doc.createTreeWalker(l,NodeFilter.SHOW_TEXT,null,false);while(x=v.nextNode()){l=x}k=o.getDoc().createRange();k.setStart(l,l.nodeValue?l.nodeValue.length:0);k.setEnd(l,l.nodeValue?l.nodeValue.length:0);q.setRng(k);o.dom.remove(s)}return i.cancel(p)}}}function z(n){var r;n=n.target;if(n&&n.parentNode&&n.nodeName=="BR"&&(l=A.getParentBlock(n))){r=n.previousSibling;i.remove(u,"DOMNodeInserted",z);if(r&&r.nodeType==3&&/\s+$/.test(r.nodeValue)){return}if(n.previousSibling||n.nextSibling){o.dom.remove(n)}}}i._add(u,"DOMNodeInserted",z);window.setTimeout(function(){i._remove(u,"DOMNodeInserted",z)},1)}})})(tinymce);(function(c){var b=c.DOM,a=c.dom.Event,d=c.each,e=c.extend;c.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new c.util.Dispatcher(h);h.onPostRender=new c.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||c.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){i.execCommand(p.cmd,p.ui||false,p.value)}}});i.onRemove.add(function(){j.destroy()});if(c.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;if(g.settings.use_native_selects){k=new c.ui.NativeListBox(m,i)}else{f=l||h._cls.listbox||c.ui.ListBox;k=new f(m,i)}h.controls[m]=k;if(c.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){g.bookmark=g.selection.getBookmark(1)});a.add(o,"focus",function(){g.selection.moveToBookmark(g.bookmark);g.bookmark=null})})}if(k.hideMenu){g.onMouseDown.add(k.hideMenu,k)}return h.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||c.ui.MenuButton;k=new f(m,i);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||c.ui.Button;k=new f(m,i)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||c.ui.SplitButton;k=h.add(new f(m,i));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,h){var l=this,j=l.editor,i,k,m,g;if(l.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(c.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n);f=l.prefix+f;m=h||l._cls.colorsplitbutton||c.ui.ColorSplitButton;k=new m(f,n);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(c.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return l.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||c.ui.Toolbar;i=new f(k,h);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||c.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(d){var a=d.util.Dispatcher,e=d.each,c=d.isIE,b=d.isOpera;d.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=d.DOM.getViewPort(),r;z=z||{};h=h||{};o=b?g.w:screen.width;j=b?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(c){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(d.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(c&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=d._addVer(r);try{if(c&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=d.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},_decode:function(f){return d.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){function b(){var d={},c={},e={};function f(j,i,h,g){if(typeof(i)=="string"){i=[i]}a.each(i,function(k){j[k.toLowerCase()]={func:h,scope:g}})}a.extend(this,{add:function(i,h,g){f(d,i,h,g)},addQueryStateHandler:function(i,h,g){f(c,i,h,g)},addQueryValueHandler:function(i,h,g){f(e,i,h,g)},execCommand:function(h,k,j,i,g){if(k=d[k.toLowerCase()]){if(k.func.call(h||k.scope,j,i,g)!==false){return true}}},queryCommandValue:function(){if(cmd=e[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}},queryCommandState:function(){if(cmd=c[cmd.toLowerCase()]){return cmd.func.call(scope||cmd.scope,ui,value,args)}}})}a.GlobalCommands=new b()})(tinymce);(function(a){a.Formatter=function(P){var H={},I=a.each,b=P.dom,n=P.selection,q=a.dom.TreeWalker,F=new a.dom.RangeUtils(b),c=P.schema.isValid,A=b.isBlock,i=P.settings.forced_root_block,p=b.nodeIndex,y="\uFEFF",M=false,v=true,m,Q,J;function j(S,R){return b.getParents(S,R,b.getRoot())}function C(){if(!J||J.apply.length||J.remove.length){J={apply:[],remove:[]}}}P.onMouseUp.add(C);C();function L(R){return R?H[R]:H}function h(R,S){if(R){if(typeof(R)!=="string"){I(R,function(U,T){h(T,U)})}else{S=S.length?S:[S];I(S,function(T){if(T.split===m){T.split=!T.selector}if(T.remove===m&&T.selector){T.remove="none"}if(typeof(T.classes)==="string"){T.classes=T.classes.split(/\s+/)}});H[R]=S}}}function N(T,Z,V){var W=L(T),aa=W[0],Y,S,X;function U(ad){var ac=ad.startContainer,ag=ad.endOffset,af,ae;if(ac.nodeType==1){af=new q(ac.childNodes[ag],ac.childNodes[ag]);for(ae=af.current();ae;ae=af.next()){if(ae.nodeType==3&&!A(ae.parentNode)){ad.setStart(ae,0);break}}}return ad}function R(ad,ac){ac=ac||aa;if(ad){I(ac.styles,function(af,ae){b.setStyle(ad,ae,o(af,Z))});I(ac.attributes,function(af,ae){b.setAttrib(ad,ae,o(af,Z))});I(ac.classes,function(ae){ae=o(ae,Z);if(!b.hasClass(ad,ae)){b.addClass(ad,ae)}})}}function ab(ad){var ac=[],af,ae;af=aa.inline||aa.block;ae=b.create(af);R(ae);F.walk(ad,function(ag){var ah;function ai(aj){var al=aj.nodeName.toLowerCase(),ak=aj.parentNode.nodeName.toLowerCase();if(e(al,"br")){ah=0;if(aa.block){b.remove(aj)}return}if(aa.wrapper&&s(aj,T,Z)){ah=0;return}if(aa.block&&!aa.wrapper&&B(al)){aj=b.rename(aj,af);R(aj);ac.push(aj);ah=0;return}if(aa.selector){I(W,function(am){if(b.is(aj,am.selector)){R(aj,am)}});return}if(c(af,al)&&c(ak,af)){if(!ah){ah=ae.cloneNode(false);aj.parentNode.insertBefore(ah,aj);ac.push(ah)}ah.appendChild(aj)}else{ah=0;I(a.grep(aj.childNodes),ai);ah=0}}I(ag,ai)});I(ac,function(ai){var ag;function aj(al){var ak=0;I(al.childNodes,function(am){if(am.nodeType!=3||!d(am)){ak++}});return ak}function ah(ak){var am,al;I(ak.childNodes,function(an){if(an.nodeType==1){am=an;return M}});if(am&&f(am,aa)){al=am.cloneNode(M);R(al);b.replace(al,ak,v);b.remove(am,1);return v}}ag=aj(ai);if(ag===0){b.remove(ai,1);return}if(aa.inline||aa.wrapper){if(!aa.exact&&ag===1){if(ah(ai)){return}}I(W,function(ak){I(b.select(ak.inline,ai),function(al){O(ak,Z,al,ak.exact?al:null)})});b.getParent(ai.parentNode,function(ak){if(s(ak,T,Z)){b.remove(ai,1);ai=0;return v}});if(ai){ai=r(z(ai),ai);ai=r(ai,z(ai,v))}}})}if(V){S=b.createRng();S.setStartBefore(V);S.setEndAfter(V);ab(S)}else{if(!n.isCollapsed()||!aa.inline){Y=n.getBookmark();ab(l(n.getRng(v),W));n.moveToBookmark(Y);n.setRng(U(n.getRng(v)));P.nodeChanged()}else{K("apply",T,Z)}}}function u(T,ac,W){var X=L(T),ae=X[0],ab,aa,S;function V(ah){var ag;ag=a.grep(ah.childNodes);I(X,function(ai){if(O(ai,ac,ah,ah)){return M}});I(ag,function(ai){V(ai)})}function Y(ag){var ah;I(j(ag.parentNode).reverse(),function(ai){if(!ah&&ai.id!="_start"&&ai.id!="_end"){if(s(ai,T,ac)){ah=ai}}});return ah}function R(ai,ag,al,ao){var ap,an,am,ah,ak,aj;if(ai){for(ap=ag.parentNode;ap&&ap!=ai;ap=ap.parentNode){an=ap.cloneNode(M);for(ak=0;ak<X.length;ak++){if(O(X[ak],ac,an,an)){an=0;break}}if(an){if(am){an.appendChild(am)}if(!ah){ah=an}am=an}}if(ao){ag=b.split(ai,ag)}if(am){al.parentNode.insertBefore(am,al);ah.appendChild(al)}}return ag}function ad(ag){return R(Y(ag),ag,ag,true)}function U(ai,ah,ag){var aj=b.create(ah,ag);ai.parentNode.insertBefore(aj,ai);aj.appendChild(ai);return aj}function Z(ai){var ah=b.get(ai?"_start":"_end"),ag=ah[ai?"firstChild":"lastChild"];b.remove(ah,1);return ag}function af(ag){var ah,ai;ag=l(ag,X,v);if(ae.split){ah=E(ag,v);ai=E(ag);if(ah!=ai){ah=U(ah,"span",{id:"_start",_mce_type:"bookmark"});ai=U(ai,"span",{id:"_end",_mce_type:"bookmark"});ad(ah);ad(ai);ah=Z(v);ai=Z()}else{ah=ai=ad(ah)}ag.startContainer=ah.parentNode;ag.startOffset=p(ah);ag.endContainer=ai.parentNode;ag.endOffset=p(ai)+1}F.walk(ag,function(aj){I(aj,function(ak){V(ak)})})}if(W){S=b.createRng();S.setStartBefore(W);S.setEndAfter(W);af(S);return}if(!n.isCollapsed()||!ae.inline){ab=n.getBookmark();af(n.getRng(v));n.moveToBookmark(ab);P.nodeChanged()}else{K("remove",T,ac)}}function x(R,T,S){if(g(R,T,S)){u(R,T,S)}else{N(R,T,S)}}function s(U,R,W){var X=L(R),V,T,S;function Y(ab,ad,ae){var aa,ac,Z=ad[ae];if(Z){for(aa in Z){if(Z.hasOwnProperty(aa)){if(ae==="attributes"){ac=b.getAttrib(ab,aa)}else{ac=G(ab,aa)}if(!e(ac,o(Z[aa],W))){return}}}}return v}if(U){for(T=0;T<X.length;T++){V=X[T];if(f(U,V)&&Y(U,V,"attributes")&&Y(U,V,"styles")){if(S=V.classes){for(T=0;T<S.length;T++){if(!b.hasClass(U,S[T])){return}}}return v}}}}function g(T,W,V){var S,U;function R(X){X=b.getParent(X,function(Y){return !!s(Y,T,W)});return s(X,T,W)}if(V){return R(V)}if(n.isCollapsed()){for(U=J.apply.length-1;U>=0;U--){if(J.apply[U].name==T){return true}}for(U=J.remove.length-1;U>=0;U--){if(J.remove[U].name==T){return false}}return R(n.getNode())}V=n.getNode();if(R(V)){return v}S=n.getStart();if(S!=V){if(R(S)){return v}}return M}a.extend(this,{get:L,register:h,apply:N,remove:u,toggle:x,match:g,matchNode:s});function f(R,S){if(e(R,S.inline)){return v}if(e(R,S.block)){return v}if(S.selector){return b.is(R,S.selector)}}function e(S,R){S=S||"";R=R||"";S=S.nodeName||S;R=R.nodeName||R;return S.toLowerCase()==R.toLowerCase()}function G(S,R){var T=b.getStyle(S,R);if(R=="color"||R=="backgroundColor"){T=b.toHex(T)}if(R=="fontWeight"&&T==700){T="bold"}return""+T}function o(R,S){if(typeof(R)!="string"){R=R(S)}else{if(S){R=R.replace(/%(\w+)/g,function(U,T){return S[T]||U})}}return R}function d(R){return R&&R.nodeType===3&&/^\s*$/.test(R.nodeValue)}function l(R,Z,U){var T=R.startContainer,W=R.startOffset,ac=R.endContainer,X=R.endOffset,ab,Y;function aa(af,ag,ad,ae){var ah,ai;ae=ae||b.getRoot();for(;;){ah=af.parentNode;if(ah==ae||A(ah)){return af}for(ab=ah[ag];ab&&ab!=af;ab=ab[ad]){if(ab.nodeType==1&&!D(ab)){return af}if(ab.nodeType==3&&!d(ab)){return af}}af=af.parentNode}return af}if(T.nodeType==1&&T.hasChildNodes()){Y=T.childNodes.length-1;T=T.childNodes[W>Y?Y:W];if(T.nodeType==3){W=0}}if(ac.nodeType==1&&ac.hasChildNodes()){Y=ac.childNodes.length-1;ac=ac.childNodes[X>Y?Y:X-1];if(ac.nodeType==3){X=ac.nodeValue.length}}if(D(T.parentNode)){T=T.parentNode}if(D(T)){T=T.nextSibling||T}if(D(ac.parentNode)){ac=ac.parentNode}if(D(ac)){ac=ac.previousSibling||ac}if(Z[0].inline){T=aa(T,"firstChild","nextSibling");ac=aa(ac,"lastChild","previousSibling")}if(Z[0].selector&&Z[0].expand!==M){function V(ae,ad){var af,ag,ah;if(ae.nodeType==3&&ae.nodeValue.length==0&&ae[ad]){ae=ae[ad]}af=j(ae);for(ag=0;ag<af.length;ag++){for(ah=0;ah<Z.length;ah++){if(b.is(af[ag],Z[ah].selector)){return af[ag]}}}return ae}T=V(T,"previousSibling");ac=V(ac,"nextSibling")}if(Z[0].block||Z[0].selector){function S(ae,ad,ag){var af;if(!Z[0].wrapper){af=b.getParent(ae,Z[0].block)}if(!af){af=b.getParent(ae.nodeType==3?ae.parentNode:ae,A)}if(af&&Z[0].wrapper){af=j(af,"ul,ol").reverse()[0]||af}if(!af){af=ae;while(af[ad]&&!A(af[ad])){af=af[ad];if(e(af,"br")){break}}}return af||ae}T=S(T,"previousSibling");ac=S(ac,"nextSibling");if(!A(T)){T=aa(T,"firstChild","nextSibling")}if(!A(ac)){ac=aa(ac,"lastChild","previousSibling")}}if(T.nodeType==1){W=p(T);T=T.parentNode}if(ac.nodeType==1){X=p(ac)+1;ac=ac.parentNode}return{startContainer:T,startOffset:W,endContainer:ac,endOffset:X}}function O(X,W,U,R){var T,S,V;if(!f(U,X)){return M}if(X.remove!="all"){I(X.styles,function(Z,Y){Z=o(Z,W);if(typeof(Y)==="number"){Y=Z;R=0}if(!R||e(G(R,Y),Z)){b.setStyle(U,Y,"")}V=1});if(V&&b.getAttrib(U,"style")==""){U.removeAttribute("style");U.removeAttribute("_mce_style")}I(X.attributes,function(aa,Y){var Z;aa=o(aa,W);if(typeof(Y)==="number"){Y=aa;R=0}if(!R||e(b.getAttrib(R,Y),aa)){if(Y=="class"){aa=b.getAttrib(U,Y);if(aa){Z="";I(aa.split(/\s+/),function(ab){if(/mce\w+/.test(ab)){Z+=(Z?" ":"")+ab}});if(Z){b.setAttrib(U,Y,Z);return}}}U.removeAttribute(Y)}});I(X.classes,function(Y){Y=o(Y,W);if(!R||b.hasClass(R,Y)){b.removeClass(U,Y)}});S=b.getAttribs(U);for(T=0;T<S.length;T++){if(S[T].nodeName.indexOf("_")!==0){return M}}}if(X.remove!="none"){k(U,X);return v}}function k(T,U){var R=T.parentNode,S;if(U.block){if(!i){function V(X,W,Y){X=z(X,W,Y);return !X||(X.nodeName=="BR"||A(X))}if(A(T)&&!A(R)){if(!V(T,M)&&!V(T.firstChild,v,1)){T.insertBefore(b.create("br"),T.firstChild)}if(!V(T,v)&&!V(T.lastChild,M,1)){T.appendChild(b.create("br"))}}}else{if(R==b.getRoot()){if(!U.list_block||!e(T,U.list_block)){I(a.grep(T.childNodes),function(W){if(c(i,W.nodeName.toLowerCase())){if(!S){S=wrapNode(W,i)}else{S.appendChild(W)}}else{S=0}})}}}}b.remove(T,1)}function z(S,R,T){if(S){R=R?"nextSibling":"previousSibling";for(S=T?S:S[R];S;S=S[R]){if(S.nodeType==1||!d(S)){return S}}}}function D(R){return R&&R.nodeType==1&&R.getAttribute("_mce_type")=="bookmark"}function r(V,U){var R,T,S;function X(aa,Z){if(aa.nodeName!=Z.nodeName){return M}function Y(ac){var ad={};I(b.getAttribs(ac),function(ae){var af=ae.nodeName.toLowerCase();if(af.indexOf("_")!==0&&af!=="class"&&af!=="style"){ad[af]=b.getAttrib(ac,af)}});return ad}function ab(af,ae){var ad,ac;for(ac in af){if(af.hasOwnProperty(ac)){ad=ae[ac];if(ad===m){return M}if(af[ac]!=ad){return M}delete ae[ac]}}for(ac in ae){if(ae.hasOwnProperty(ac)){return M}}return v}if(!ab(Y(aa),Y(Z))){return M}if(!ab(b.parseStyle(b.getAttrib(aa,"style")),b.parseStyle(b.getAttrib(Z,"style")))){return M}return v}if(V&&U){function W(Z,Y){for(T=Z;T;T=T[Y]){if(T.nodeType==3&&!d(T)){return Z}if(T.nodeType==1&&!D(T)){return T}}return Z}V=W(V,"previousSibling");U=W(U,"nextSibling");if(X(V,U)){for(T=V.nextSibling;T&&T!=U;){S=T;T=T.nextSibling;V.appendChild(S)}b.remove(U);I(a.grep(U.childNodes),function(Y){V.appendChild(Y)});return V}}return U}function B(R){return/^(h[1-6]|p|div|pre|address)$/.test(R)}function E(S,V){var R,U,T;R=S[V?"startContainer":"endContainer"];U=S[V?"startOffset":"endOffset"];if(R.nodeType==1){T=R.childNodes.length-1;if(!V&&U){U--}R=R.childNodes[U>T?T:U]}return R}function K(Z,U,Y){var V,S,X=n.getNode().parentNode,ab=P.getDoc(),W="mceinline",ae=["onKeyDown","onKeyUp","onKeyPress"],T=J[Z],aa=J[Z=="apply"?"remove":"apply"];for(V=T.length-1;V>=0;V--){if(T[V].name==U){return}}T.push({name:U,vars:Y});for(V=aa.length-1;V>=0;V--){if(aa[V].name==U){aa.splice(V,1)}}function ad(){if(Q){I(ae,function(af){P[af].remove(Q)});Q=0}}function ac(af){I(J.apply.reverse(),function(ag){N(ag.name,ag.vars,af)});I(J.remove.reverse(),function(ag){u(ag.name,ag.vars,af)});b.remove(af,1);C()}function R(af){return af.face==W||af.style.fontFamily==W}ad();ab.execCommand("FontName",false,W);I(b.select("font,span",X),function(ag){var af;if(R(ag)){af=n.getBookmark();ac(ag);n.moveToBookmark(af);P.nodeChanged();X=0}});if(X){Q=function(af,ag){I(b.select("font,span",X),function(ai){var ah,aj;if(ai.face==W||ai.style.fontFamily==W){aj=ai.firstChild;ac(ai);S=b.createRng();S.setStart(aj,aj.nodeValue.length);S.setEnd(aj,aj.nodeValue.length);n.setRng(S);af.nodeChanged();ad()}});if(ag.type=="keyup"){ad();C()}};I(ae,function(af){P[af].addToTop(Q)})}}}})(tinymce);(function(a){a.each(["Cut","Copy","Paste"],function(b){a.GlobalCommands.add(b,function(){var c=this,e=c.getDoc();try{e.execCommand(b,false,null);if(!e.queryCommandEnabled(b)){throw"Error"}}catch(d){if(a.isGecko){c.windowManager.confirm(c.getLang("clipboard_msg"),function(f){if(f){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{c.windowManager.alert(c.getLang("clipboard_no_support"))}}})})})(tinymce);(function(){var a=tinymce.GlobalCommands;a.add(["mceEndUndoLevel","mceAddUndoLevel"],function(){this.undoManager.add()});a.add("Undo",function(){var b=this;if(b.settings.custom_undo_redo){b.undoManager.undo();b.nodeChanged();return true}return false});a.add("Redo",function(){var b=this;if(b.settings.custom_undo_redo){b.undoManager.redo();b.nodeChanged();return true}return false})})();